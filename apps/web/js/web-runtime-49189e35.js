define(["exports","./chunks/vendor-e2ecbc23","./chunks/useClientService-0039200a","./chunks/manager-1f78e82e","./chunks/functions-31457630","./chunks/error-45f725fe","./chunks/useRoute-035af8cd"],(function(e,t,i,a,n,o,s){"use strict";class r{store;constructor(e){this.store=e}hasUserManagement(){return"admin"===this.user.role?.name}hasSpaceManagement(){return["admin","spaceadmin"].includes(this.user.role?.name)}canEditSpaceQuota(){return!!this.user.role?.settings.find((e=>"set-space-quota"===e.name))}get user(){return this.store.getters.user}}const l={props:{target:{type:String,required:!0}},computed:{targetElement(){return document.getElementById(this.target)}},methods:{skipToTarget(){this.targetElement.setAttribute("tabindex","-1"),this.targetElement.focus(),this.targetElement.scrollIntoView()}}};var c=function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"skip-button",on:{click:e.skipToTarget}},[e._t("default")],2)};c._withStripped=!0;const u=t.normalizeComponent({render:c,staticRenderFns:[]},undefined,l,"data-v-506cd62a",false,undefined,!1,void 0,void 0,void 0);var d={computed:{...t.mapGetters(["getNavItemsByExtension"])},methods:{navigation_getMenuItems(e,t){return this.applicationsList.filter((t=>"extension"===t.type?this.getNavItemsByExtension(t.id).filter((t=>p(e,t))).length>0:p(e,t))).map((e=>{const i=this.$language.current;let a,n,o=e.title?e.title.en:e.name;e.title&&e.title[i]&&(o=e.title[i]),e.icon?e.icon.indexOf(".")<0?a=e.icon:n=e.icon:a="deprecated";const s={icon:a,iconUrl:n,title:o};return e.url?(s.url=e.url,s.target=["_blank","_self","_parent","_top"].includes(e.target)?e.target:"_blank"):e.path?(s.path=e.path,s.active=t?.startsWith(s.path)):(s.path=`/${e.id}`,s.active=t?.startsWith(s.path)),s}))}}};function p(e,t){return t.menu?e.includes(t.menu):e.includes(null)}const m={props:{applicationsList:{type:Array,required:!1,default:()=>[]}},computed:{...t.mapGetters("runtime/auth",["accessToken"]),applicationSwitcherLabel(){return this.$gettext("Application Switcher")}},mounted(){this.$refs.menu?.tippy?.setProps({onHidden:()=>this.$refs.menubutton.$el.focus(),onShown:()=>this.$refs.menu.$el.querySelector("a:first-of-type").focus()})},methods:{async clickApp(e){e.url?.endsWith("/apps/files")&&await this.setClassicUIDefault()},setClassicUIDefault(){const e=new URL(a.configurationManager.serverUrl);e.pathname=e.pathname.replace(/\/$/,"")+"/index.php/apps/web/settings/default";return i.clientService.httpAuthenticated(this.accessToken).post(e.href,{isDefault:!1})}}};var h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"applications-menu","aria-label":e.$gettext("Main navigation")}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.applicationSwitcherLabel,expression:"applicationSwitcherLabel"}],ref:"menubutton",staticClass:"oc-topbar-menu-burger",attrs:{id:"_appSwitcherButton",appearance:"raw",variation:"inverse","aria-label":e.applicationSwitcherLabel}},[i("oc-icon",{staticClass:"oc-flex",attrs:{name:"grid",size:"large"}})],1),e._v(" "),i("oc-drop",{ref:"menu",attrs:{"drop-id":"app-switcher-dropdown",toggle:"#_appSwitcherButton",mode:"click","padding-size":"small","close-on-click":""}},[i("oc-list",{staticClass:"applications-list"},e._l(e.applicationsList,(function(t,a){return i("li",{key:"apps-menu-"+a,on:{click:function(i){return e.clickApp(t)}}},[i("oc-button",{key:t.url?"apps-menu-external-link":"apps-menu-internal-link",class:{"oc-background-primary-gradient":t.active},attrs:{type:t.url?"a":"router-link",target:t.target,href:t.url,to:t.path,appearance:"raw",variation:t.active?"inverse":"passive"}},[i("span",{staticClass:"icon-box"},[i("oc-icon",{attrs:{name:t.icon}})],1),e._v(" "),i("span",{domProps:{textContent:e._s(e.$gettext(t.title))}}),e._v(" "),t.active?i("oc-icon",{staticClass:"active-check",attrs:{name:"check"}}):e._e()],1)],1)})),0)],1)],1)};h._withStripped=!0;const g=t.normalizeComponent({render:h,staticRenderFns:[]},undefined,m,"data-v-79a717aa",false,undefined,!1,void 0,void 0,void 0);const f={props:{applicationsList:{type:Array,required:!1,default:()=>[]}},setup:()=>({hasSpaces:i.useCapabilitySpacesEnabled()}),computed:{...t.mapGetters(["quota","user"]),...t.mapGetters({legacyQuota:"quota"}),...t.mapState("runtime/spaces",["spaces"]),quota(){return this.hasSpaces?this.spaces.find((e=>"personal"===e.driveType))?.spaceQuota:this.legacyQuota},useLegacyQuota(){return!this.hasSpaces},userId(){return this.user.username||this.user.id},personalStorageLabel(){return this.limitedPersonalStorage?this.$gettextInterpolate(this.$gettext("Personal storage (%{percentage}% used)"),{percentage:this.quotaUsagePercent||0}):this.$gettext("Personal storage")},personalStorageDetailsLabel(){const e="none"===this.quota.definition?0:this.quota.total||0,i=this.quota.used||0;return this.$gettextInterpolate(e?this.$gettext("%{used} of %{total} used"):this.$gettext("%{used} used"),{used:t.filesize_min(i),total:t.filesize_min(e)})},limitedPersonalStorage(){return this.useLegacyQuota?!t.isNil(this.quota.relative)&&"none"!==this.quota.definition:0!==this.quota.total},quotaEnabled(){return!!this.quota},quotaUsagePercent(){return this.useLegacyQuota?this.quota.relative:parseFloat((this.quota.used/this.quota.total*100).toFixed(2))},quotaProgressVariant(){return(this.quotaUsagePercent||0)<80?"primary":(this.quotaUsagePercent||0)<90?"warning":"danger"}},mounted(){this.$refs.menu?.tippy?.setProps({onHidden:()=>this.$refs.menuButton.$el.focus(),onShown:()=>this.$refs.menu.$el.querySelector("a:first-of-type").focus()})},methods:{logout(){i.authService.logoutUser()}}};var v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.userId?i("nav",{attrs:{"aria-label":e.$gettext("Account menu")}},[i("oc-button",{ref:"menuButton",staticClass:"oc-topbar-personal",attrs:{id:"_userMenuButton",appearance:"raw","aria-label":e.$gettext("User Menu")}},[i("avatar-image",{staticClass:"oc-topbar-personal-avatar oc-flex-inline oc-flex-center oc-flex-middle",attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}})],1),e._v(" "),i("oc-drop",{ref:"menu",attrs:{"drop-id":"account-info-container",toggle:"#_userMenuButton",mode:"click","close-on-click":"","padding-size":"small"}},[i("oc-list",{staticClass:"user-menu-list"},[i("li",[i("oc-button",{attrs:{id:"oc-topbar-account-manage",type:"router-link",to:{path:"/account"},appearance:"raw"}},[i("avatar-image",{attrs:{width:32,userid:e.userId,"user-name":e.user.displayname}}),e._v(" "),i("span",{staticClass:"profile-info-wrapper",class:{"oc-py-xs":!e.user.email}},[i("span",{domProps:{textContent:e._s(e.user.displayname)}}),e._v(" "),e.user.email?i("br"):e._e(),e._v(" "),e.user.email?i("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.user.email)}}):e._e()])],1)],1),e._v(" "),e._l(e.applicationsList,(function(t,a){return i("li",{key:"user-menu-"+a},[t.url?i("oc-button",{attrs:{type:"a",appearance:"raw",target:t.target,href:t.url}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1):i("oc-button",{attrs:{type:"router-link",appearance:"raw",to:{path:t.path}}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:t.icon}}),e._v(" "),i("translate",[e._v(e._s(t.title))])],1)],1)})),e._v(" "),i("li",[i("oc-button",{attrs:{id:"oc-topbar-account-logout",appearance:"raw"},on:{click:e.logout}},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"logout-box-r","fill-type":"line"}}),e._v(" "),i("translate",[e._v("Log out")])],1)],1),e._v(" "),e.quotaEnabled?i("li",{staticClass:"storage-wrapper oc-pl-s"},[i("oc-icon",{staticClass:"oc-p-xs",attrs:{name:"cloud","fill-type":"line"}}),e._v(" "),i("div",{staticClass:"storage-wrapper-text"},[i("p",{staticClass:"oc-my-rm"},[i("span",{domProps:{textContent:e._s(e.personalStorageLabel)}}),e._v(" "),i("br"),e._v(" "),i("span",{staticClass:"oc-text-small",domProps:{textContent:e._s(e.personalStorageDetailsLabel)}})]),e._v(" "),e.limitedPersonalStorage?i("oc-progress",{attrs:{value:e.quotaUsagePercent,max:100,size:"small",variation:e.quotaProgressVariant}}):e._e()],1)],1):e._e()],2)],1)],1):e._e()};v._withStripped=!0;const b=t.normalizeComponent({render:v,staticRenderFns:[]},undefined,f,"data-v-0c95268e",false,undefined,!1,void 0,void 0,void 0);const w={computed:{...t.mapGetters(["activeNotifications","configuration"]),notificationsLabel(){return this.$gettext("Notifications")}},methods:{...t.mapActions(["deleteNotification","showMessage"]),executeRequest(e,i,a,o){this.$client.requests.ocs({service:"apps/"+e,action:i.slice(i.lastIndexOf("api")),method:a}).then((e=>{this.deleteNotification({client:this.$client,notification:o}),e.json().then((e=>{e.ocs.data.forEach((e=>{const i=this.$route.params.item?`/${this.$route.params.item}`:"/",{state:a,path:o,file_target:s}=e;if(a===n.ShareStatus.accepted&&s)t.bus.publish("app.files.list.load");else if(o){o.slice(0,o.lastIndexOf("/")+1)===i&&t.bus.publish("app.files.list.load")}}))}))}))},shouldDisplayLink:e=>e.link&&"local_share"!==e.object_type}};var y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-flex oc-flex-middle",attrs:{id:"oc-notification"}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.notificationsLabel,expression:"notificationsLabel"}],attrs:{id:"oc-notification-bell",appearance:"raw",variation:"inverse","aria-label":e.notificationsLabel}},[i("oc-icon",{staticClass:"oc-cursor-pointer oc-flex oc-flex-middle",attrs:{name:"notification-3","fill-type":"line"}})],1),e._v(" "),i("oc-drop",{staticClass:"oc-overflow-auto oc-width-3-4 oc-width-large@s",attrs:{id:"oc-notification-drop","drop-id":"notifications-dropdown",toggle:"#oc-notification-bell",mode:"click",options:{pos:"bottom-right",delayHide:0},"padding-size":"small"}},e._l(e.activeNotifications,(function(t,a){return i("div",{key:a,staticClass:"oc-width-1-1"},[i("h4",{domProps:{textContent:e._s(t.subject)}}),e._v(" "),t.message?i("p",{staticClass:"oc-text-small"},[e._v(e._s(t.message))]):e._e(),e._v(" "),i("p",[e.shouldDisplayLink(t)?i("a",{attrs:{href:t.link,target:"_blank"}},[e._v(e._s(t.link))]):e._e()]),e._v(" "),i("div",{staticClass:"oc-width-1-1 oc-flex-right"},[0!==t.actions.length?e._l(t.actions,(function(n,o){return i("oc-button",{key:a+"-"+o,staticClass:"oc-ml-s",attrs:{size:"small",variation:n.primary?"primary":"passive",appearance:"filled"},on:{click:function(i){return i.preventDefault(),e.executeRequest(t.app,n.link,n.type,t.notification_id)}}},[e._v(e._s(n.label))])})):i("oc-button",{attrs:{id:"resolve-notification-button",size:"small"},on:{"~click":function(i){return i.preventDefault(),e.deleteNotification({client:e.$client,notification:t.notification_id})}}},[e._v("\n          Mark as read\n        ")])],2),e._v(" "),a+1!==e.activeNotifications.length?i("hr"):e._e()])})),0)],1)};y._withStripped=!0;const C=t.normalizeComponent({render:y,staticRenderFns:[]},undefined,w,"data-v-94d46274",false,undefined,!1,void 0,void 0,void 0);const k={name:"FeedbackLink",props:{href:{type:String,required:!1,default:null},ariaLabel:{type:String,required:!1,default:null},description:{type:String,required:!1,default:null}},computed:{hrefOrFallback(){return this.href||"https://owncloud.com/web-design-feedback"},ariaLabelOrFallback(){return this.ariaLabel||this.$gettext("ownCloud feedback survey")},descriptionOrFallback(){return this.description||this.$gettext("Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.")}}};var I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-flex"},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.descriptionOrFallback,expression:"descriptionOrFallback"}],attrs:{type:"a",href:e.hrefOrFallback,target:"_blank",appearance:"raw",variation:"inverse","aria-label":e.ariaLabelOrFallback,"aria-describedby":"oc-feedback-link-description"}},[i("oc-icon",{attrs:{name:"feedback"}})],1),e._v(" "),i("p",{staticClass:"oc-invisible-sr",attrs:{id:"oc-feedback-link-description"},domProps:{textContent:e._s(e.descriptionOrFallback)}})],1)};I._withStripped=!0;const x=t.normalizeComponent({render:I,staticRenderFns:[]},undefined,k,undefined,false,undefined,!1,void 0,void 0,void 0),_="default",S="default-dark",E=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?S:_;const A={setup(){const e=i.useStore(),a=o.useLocalStorage("oc_currentThemeName",E()),n=t.computed((()=>e.getters.configuration.themes[t.unref(a)]));return t.watch(a,(async()=>{await e.dispatch("loadTheme",{theme:t.unref(n)}),(e=>{for(const t in e.designTokens.colorPalette)document.querySelector(":root").style.setProperty(`--oc-color-${t}`,e.designTokens.colorPalette[t])})(t.unref(n))})),{currentThemeName:a,currentTheme:n}},computed:{...t.mapGetters(["configuration"]),isLightTheme(){return[null,_].includes(this.currentThemeName)},buttonLabel(){return this.$gettext("Click to switch theme")},switchIcon(){return this.isLightTheme?"sun":"moon-clear"},switchLabel(){return this.$gettext("Currently used theme")},switchText(){return this.isLightTheme?this.$gettext("Light mode"):this.$gettext("Dark mode")}},methods:{toggleTheme(){this.currentThemeName=this.isLightTheme?S:_}}};var P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.buttonLabel,expression:"buttonLabel"}],staticClass:"themeswitcher-btn",attrs:{"aria-label":e.buttonLabel,appearance:"raw",variation:"inverse"},on:{click:e.toggleTheme}},[i("span",{staticClass:"oc-visible@s",attrs:{"aria-label":e.switchLabel},domProps:{textContent:e._s(e.switchText)}}),e._v(" "),i("oc-icon",{attrs:{name:e.switchIcon,"fill-type":"line"}})],1)};P._withStripped=!0;const T={components:{ApplicationsMenu:g,FeedbackLink:x,Notifications:C,ThemeSwitcher:t.normalizeComponent({render:P,staticRenderFns:[]},undefined,A,undefined,false,undefined,!1,void 0,void 0,void 0),UserMenu:b},mixins:[d],props:{applicationsList:{type:Array,required:!1,default:()=>[]},activeNotifications:{type:[Array,Boolean],required:!1,default:()=>[]}},computed:{...t.mapGetters(["configuration","user"]),activeRoutePath(){return this.$router.resolve(this.$route).location.path},appMenuItems(){return this.navigation_getMenuItems([null,"apps","appSwitcher"],this.activeRoutePath)},userMenuItems(){return this.navigation_getMenuItems(["user"],this.activeRoutePath)},darkThemeAvailable(){return this.configuration.themes.default&&this.configuration.themes["default-dark"]},sidebarLogoAlt(){return this.$gettext("Navigate to personal files page")},logoImage(){return this.configuration.currentTheme.logo.topbar},isFeedbackLinkEnabled(){return!this.configuration?.options?.disableFeedbackLink},feedbackLinkOptions(){const e=this.configuration?.options?.feedbackLink;return this.isFeedbackLinkEnabled&&e?{...e.href&&{href:e.href},...e.ariaLabel&&{ariaLabel:e.ariaLabel},...e.description&&{description:e.description}}:{}},isNotificationBellEnabled(){return this.user?.id&&this.activeNotifications.length},isUserMenuEnabled(){return this.user?.id}}};var N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"oc-flex oc-flex-middle oc-flex-between oc-px-m",attrs:{id:"oc-topbar","aria-label":e.$gettext("Top bar")}},[i("div",{staticClass:"oc-topbar-left oc-flex oc-flex-middle oc-flex-between"},[e.appMenuItems.length?i("applications-menu",{attrs:{"applications-list":e.appMenuItems}}):e._e(),e._v(" "),i("router-link",{ref:"navigationSidebarLogo",attrs:{to:"/"}},[i("oc-img",{staticClass:"oc-logo-image",attrs:{src:e.logoImage,alt:e.sidebarLogoAlt}})],1)],1),e._v(" "),i("div",{staticClass:"portal-wrapper"},[i("portal-target",{attrs:{name:"app.runtime.header",multiple:""}})],1),e._v(" "),i("div",{staticClass:"oc-topbar-right oc-flex oc-flex-middle oc-flex-between"},[e.darkThemeAvailable?i("theme-switcher"):e._e(),e._v(" "),e.isFeedbackLinkEnabled?i("feedback-link",e._b({},"feedback-link",e.feedbackLinkOptions,!1)):e._e(),e._v(" "),e.isNotificationBellEnabled?i("notifications"):e._e(),e._v(" "),e.isUserMenuEnabled?i("user-menu",{attrs:{"applications-list":e.userMenuItems}}):e._e()],1)])};N._withStripped=!0;const L=t.normalizeComponent({render:N,staticRenderFns:[]},undefined,T,undefined,false,undefined,!1,void 0,void 0,void 0);const $={props:{activeMessages:{type:Array,required:!1,default:()=>[]}},computed:{...t.mapGetters(["configuration"]),notificationPosition(){return this.configuration.options.topCenterNotifications?"top-center":"default"},$_ocMessages_limited(){return this.activeMessages?this.activeMessages.slice(0,5):[]}},methods:{deleteMessage(e){this.$emit("deleteMessage",e)}}};var R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("oc-notifications",{attrs:{position:e.notificationPosition}},e._l(e.$_ocMessages_limited,(function(t){return i("oc-notification-message",{key:t.id,attrs:{title:t.title,message:t.desc,status:t.status},on:{close:function(i){return e.deleteMessage(t)}}})})),1)};R._withStripped=!0;const F=t.normalizeComponent({render:R,staticRenderFns:[]},undefined,$,undefined,false,undefined,!1,void 0,void 0,void 0);const U={props:{name:{type:String,required:!0},index:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1},target:{type:String,required:!1,default:null},icon:{type:String,required:!0},fillType:{type:String,required:!1,default:"fill"},collapsed:{type:Boolean,required:!1,default:!1},tag:{type:String,required:!1,default:null}},computed:{navName(){return t.get(this.$router?.resolve(this.target),"route.name")},toolTip(){return{content:this.collapsed?this.$gettextInterpolate(this.$gettext("Navigate to %{ pageName } page"),{pageName:this.name}):"",placement:"right",arrow:!1}}},watch:{active(e){e&&this.animateHighlightPosition(this.index)}},mounted(){this.active&&this.animateHighlightPosition(this.index)},methods:{animateHighlightPosition(e,t=.2){const i=document.getElementById("nav-highlighter");if(!i)return;const a=this.$refs.item.offsetTop,n=i.style;n.setProperty("transition-duration",`${t}s`),n.setProperty("transform",`translateY(${a}px)`)}}};var O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{ref:"item",staticClass:"oc-sidebar-nav-item oc-pb-xs oc-px-s",attrs:{"aria-current":e.active?"page":null}},[i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.toolTip,expression:"toolTip"}],class:["oc-sidebar-nav-item-link",{active:e.active}],attrs:{type:"router-link",appearance:"raw",variation:e.active?"inverse":"passive",to:e.target,"data-nav-id":e.index,"data-nav-name":e.navName}},[i("span",{staticClass:"oc-flex"},[i("oc-icon",{attrs:{name:e.icon,"fill-type":e.fillType}}),e._v(" "),i("span",{staticClass:"oc-ml-m text",class:{"text-invisible":e.collapsed},domProps:{textContent:e._s(e.name)}})],1),e._v(" "),e.tag?i("oc-tag",{staticClass:"oc-py-rm",attrs:{size:"small"}},[e._v(e._s(e.tag))]):e._e()],1)],1)};O._withStripped=!0;const M={components:{SidebarNavItem:t.normalizeComponent({render:O,staticRenderFns:[]},undefined,U,undefined,false,undefined,!1,void 0,void 0,void 0)},props:{navItems:{type:Array,required:!0}},computed:{...t.mapState(["navigation"]),toggleSidebarButtonClass(){return this.navigation.closed?"toggle-sidebar-button-collapsed":"toggle-sidebar-button-expanded oc-pr-s"},toggleSidebarButtonIcon(){return this.navigation.closed?"arrow-drop-right":"arrow-drop-left"},isAnyNavItemActive(){return this.navItems.some((e=>!0===e.active))}},mounted(){const e=document.getElementById("web-nav-sidebar"),t=document.getElementById("nav-highlighter");if(!t||!e)return;const i=new ResizeObserver((()=>{const e=document.getElementsByClassName("oc-sidebar-nav-item-link")[0];e&&(t.style.setProperty("transition-duration","0.05s"),t.style.setProperty("width",`${e.clientWidth}px`),t.style.setProperty("height",`${e.clientHeight}px`))}));i.observe(e),this.$on("beforeDestroy",(()=>{i.disconnect()}))},methods:{...t.mapActions(["openNavigation","closeNavigation"]),toggleSidebarButtonClick(){return this.navigation.closed?this.openNavigation():this.closeNavigation()},getUuid:()=>t.v4().replaceAll("-","")}};var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"oc-app-navigation-collapsed":e.navigation.closed,"oc-app-navigation-expanded":!e.navigation.closed},attrs:{id:"web-nav-sidebar"}},[i("oc-button",{staticClass:"toggle-sidebar-button oc-py-s",class:e.toggleSidebarButtonClass,attrs:{appearance:"raw","aria-label":e.$gettext("Toggle sidebar")},on:{click:e.toggleSidebarButtonClick}},[i("oc-icon",{attrs:{size:"large","fill-type":"line",name:e.toggleSidebarButtonIcon}})],1),e._v(" "),i("nav",{staticClass:"oc-sidebar-nav oc-my-m oc-px-xs",attrs:{"aria-label":e.$gettext("Sidebar navigation menu")}},[i("oc-list",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isAnyNavItemActive,expression:"isAnyNavItemActive"}],staticClass:"oc-ml-s oc-background-primary-gradient",attrs:{id:"nav-highlighter"}}),e._v(" "),e._l(e.navItems,(function(t){return i("sidebar-nav-item",{key:t.route.path,attrs:{index:e.getUuid(),target:t.route.path,active:t.active,icon:t.icon,"fill-type":t.fillType,name:t.name,collapsed:e.navigation.closed,tag:t.tag}})}))],2)],1),e._v(" "),e._t("bottom")],2)};D._withStripped=!0;const z=t.normalizeComponent({render:D,staticRenderFns:[]},undefined,M,undefined,false,undefined,!1,void 0,void 0,void 0);const q={setup:()=>({hasShareJail:i.useCapabilityShareJailEnabled()}),data:()=>({showInfo:!1,infoExpanded:!1,uploads:{},errors:{},successful:[],filesInProgressCount:0,totalProgress:0,uploadsPaused:!1,uploadsCancelled:!1,inPreparation:!0,runningUploads:0,bytesTotal:0,bytesUploaded:0,filesInEstimation:{},timeStarted:null,remainingTime:void 0}),computed:{...t.mapGetters(["configuration"]),uploadInfoTitle(){return this.filesInProgressCount&&!this.inPreparation?this.$gettextInterpolate(this.$ngettext("%{ filesInProgressCount } item uploading...","%{ filesInProgressCount } items uploading...",this.filesInProgressCount),{filesInProgressCount:this.filesInProgressCount}):this.uploadsCancelled?this.$gettext("Upload cancelled"):Object.keys(this.errors).length?this.$gettext("Upload failed"):this.runningUploads?this.$gettext("Preparing upload..."):this.$gettext("Upload complete")},uploadingLabel(){if(Object.keys(this.errors).length){const e=this.successful.length+Object.keys(this.errors).length;return this.$gettextInterpolate(this.$ngettext("%{ errors } of %{ uploads } item failed","%{ errors } of %{ uploads } items failed",e),{uploads:e,errors:Object.keys(this.errors).length})}return this.$gettextInterpolate(this.$ngettext("%{ successfulUploads } item uploaded","%{ successfulUploads } items uploaded",this.successful.length),{successfulUploads:this.successful.length})},displayThumbnails(){return!this.configuration?.options?.disablePreviews},uploadsPausable(){return this.$uppyService.tusActive()}},created(){this.$uppyService.subscribe("uploadStarted",(()=>{this.remainingTime||(this.remainingTime=this.$gettext("Calculating estimated time...")),!this.runningUploads&&this.showInfo&&this.cleanOverlay(),this.showInfo=!0,this.runningUploads+=1})),this.$uppyService.subscribe("addedForUpload",(e=>{this.filesInProgressCount+=e.filter((e=>!e.isFolder)).length;for(const t of e){t.data?.size&&(this.bytesTotal+=t.data.size);const{relativeFolder:e,uploadId:i,topLevelFolderId:a}=t.meta,n=!e;n&&(this.uploads[i]=t,t.isFolder&&void 0===this.uploads[i].filesCount&&(this.uploads[i].filesCount=0,this.uploads[i].errorCount=0,this.uploads[i].successCount=0)),t.isFolder||n||!this.uploads[a]||(this.uploads[a].filesCount+=1)}})),this.$uppyService.subscribe("uploadCompleted",(()=>{this.runningUploads-=1,this.runningUploads||this.resetProgress()})),this.$uppyService.subscribe("progress",(e=>{this.totalProgress=e})),this.$uppyService.subscribe("upload-progress",(({file:e,progress:t})=>{this.timeStarted||(this.timeStarted=new Date,this.inPreparation=!1),void 0===this.filesInEstimation[e.meta.uploadId]&&(this.filesInEstimation[e.meta.uploadId]=0);const i=t.bytesUploaded-this.filesInEstimation[e.meta.uploadId];this.bytesUploaded+=i,this.filesInEstimation[e.meta.uploadId]=t.bytesUploaded;const a=new Date-this.timeStarted,n=100*this.bytesUploaded/this.bytesTotal;if(0===n)return;const o=a/n*100-a;this.remainingTime=this.getRemainingTime(o)})),this.$uppyService.subscribe("uploadError",(({file:e,error:t})=>{this.errors[e.meta.uploadId]||(this.uploads[e.meta.uploadId]||(this.uploads[e.meta.uploadId]=e),e.meta.relativePath?this.uploads[e.meta.uploadId].path=e.meta.relativePath:this.uploads[e.meta.uploadId].path=`${e.meta.currentFolder}${e.name}`,this.uploads[e.meta.uploadId].targetRoute=e.meta.route,this.uploads[e.meta.uploadId].status="error",this.errors[e.meta.uploadId]=t,this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"error"))})),this.$uppyService.subscribe("uploadSuccess",(e=>{if(this.uploads[e.meta.uploadId]){if(e.meta.relativeFolder)return e.isFolder||(this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"success")),void delete this.uploads[e.meta.uploadId];if(this.uploads[e.meta.uploadId]=e,"files-public-files"===e.meta.route?.name){const t=e.meta.currentFolder.split("/").slice(1).join("/");this.uploads[e.meta.uploadId].path=`${t}${e.name}`}else this.uploads[e.meta.uploadId].path=`${e.meta.currentFolder}${e.name}`;this.uploads[e.meta.uploadId].targetRoute=this.buildRouteFromUppyResource(e),e.isFolder||(this.uploads[e.meta.uploadId].status="success",this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1)}else e.isFolder||(this.successful.push(e.meta.uploadId),this.filesInProgressCount-=1,e.meta.topLevelFolderId&&this.handleTopLevelFolderUpdate(e,"success"))}))},methods:{getRemainingTime(e){const t=Math.round(e/1e3/60);if(t>=1&&t<60)return this.$gettextInterpolate(this.$ngettext("%{ roundedRemainingMinutes } minute left","%{ roundedRemainingMinutes } minutes left",t),{roundedRemainingMinutes:t});const i=Math.round(e/1e3/60/60);return i>0?this.$gettextInterpolate(this.$ngettext("%{ roundedRemainingHours } hour left","%{ roundedRemainingHours } hours left",i),{roundedRemainingHours:i}):this.$gettext("Few seconds left")},handleTopLevelFolderUpdate(e,t){const i=this.uploads[e.meta.topLevelFolderId];"success"===t?i.successCount+=1:i.errorCount+=1,i.successCount+i.errorCount===i.filesCount&&(i.status=i.errorCount?"error":"success")},closeInfo(){this.showInfo=!1,this.infoExpanded=!1,this.cleanOverlay(),this.resetProgress()},cleanOverlay(){this.uploadsCancelled=!1,this.uploads={},this.errors={},this.successful=[],this.filesInProgressCount=0,this.runningUploads=0},resetProgress(){this.bytesTotal=0,this.bytesUploaded=0,this.filesInEstimation={},this.timeStarted=null,this.remainingTime=void 0,this.inPreparation=!0},displayFileAsResource:e=>!!e.targetRoute,isResourceClickable:e=>!0===e.isFolder,folderLink(e){return this.createFolderLink(e.path,e.targetRoute)},parentFolderLink(e){return this.createFolderLink(t.path.dirname(e.path),e.targetRoute)},buildRouteFromUppyResource:e=>e.meta.routeName?{name:e.meta.routeName,query:{shareId:e.meta.routeShareId},params:{item:e.meta.routeItem,shareName:e.meta.routeShareName,storage:e.meta.routeStorage,storageId:e.meta.routeStorageId,name:e.meta.routeParamName}}:null,defaultParentFolderName(e){const{targetRoute:t}=e;return"files-spaces-project"===t?.name?t.params.name:this.hasShareJail&&"files-spaces-share"===t?.name?t.params.shareName:"files-public-files"===t?.name?this.$gettext("Public link"):this.hasShareJail?this.$gettext("Personal"):this.$gettext("All files and folders")},createFolderLink(e,t){if(!t)return{};const i=e.replace(/^\//,""),a={name:t.name,query:t.query,params:{...t.params?.storageId&&e&&{storageId:t.params?.storageId},...t.params?.storage&&{storage:t.params?.storage},...t.params?.shareName&&{shareName:t.params?.shareName}}};return i&&(a.params={...t.params},a.params.item=i),"files-public-files"===a.name&&(a.params.item=t.params.item),a},toggleInfo(){this.infoExpanded=!this.infoExpanded},retryUploads(){this.filesInProgressCount+=Object.keys(this.errors).length,this.runningUploads+=1;for(const e of Object.keys(this.errors)){this.uploads[e].status=void 0;const t=this.uploads[e].meta.topLevelFolderId;t&&(this.uploads[t].status=void 0,this.uploads[t].errorCount=0)}this.errors={},this.$uppyService.retryAllUploads()},togglePauseUploads(){this.uploadsPaused?(this.$uppyService.resumeAllUploads(),this.timeStarted=null):this.$uppyService.pauseAllUploads(),this.uploadsPaused=!this.uploadsPaused},cancelAllUploads(){this.uploadsCancelled=!0,this.filesInProgressCount=0,this.runningUploads=0,this.resetProgress(),this.$uppyService.cancelAllUploads();const e=Object.values(this.uploads).filter((e=>"success"!==e.status&&"error"!==e.status));for(const t of e)this.uploads[t.meta.uploadId].status="cancelled"},getUploadItemMessage(e){const t=this.errors[e.meta.uploadId];if(t){let e=this.$gettext("Unknown error");return t.message.includes("response code: 507")&&(e=this.$gettext("Quota exceeded")),e}},getUploadItemClass(e){return this.errors[e.meta.uploadId]?"upload-info-danger":"upload-info-success"}}};var V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showInfo?i("div",{staticClass:"oc-rounded oc-box-shadow-medium",attrs:{id:"upload-info"}},[i("div",{staticClass:"\n      upload-info-title\n      oc-flex oc-flex-between oc-flex-middle oc-px-m oc-py-s oc-rounded-top\n    "},[i("p",{staticClass:"oc-my-xs",domProps:{textContent:e._s(e.uploadInfoTitle)}}),e._v(" "),e.filesInProgressCount?e._e():i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Close"),expression:"$gettext('Close')"}],attrs:{id:"close-upload-info-btn",appearance:"raw",variation:"inverse"},on:{click:e.closeInfo}},[i("oc-icon",{attrs:{name:"close"}})],1)],1),e._v(" "),i("div",{staticClass:"upload-info-status oc-px-m oc-pt-m oc-flex oc-flex-between oc-flex-middle",class:{"oc-pb-m":!e.runningUploads}},[e.runningUploads?i("div",{staticClass:"oc-flex oc-flex-middle"},[i("oc-spinner",{staticClass:"oc-mr-s",attrs:{size:"small"}}),e._v(" "),i("span",{staticClass:"oc-text-small oc-text-muted",domProps:{textContent:e._s(e.remainingTime)}})],1):i("div",{staticClass:"upload-info-label",class:{"upload-info-danger":Object.keys(e.errors).length&&!e.uploadsCancelled,"upload-info-success":!Object.keys(e.errors).length&&!e.uploadsCancelled}},[e._v("\n      "+e._s(e.uploadingLabel)+"\n    ")]),e._v(" "),i("div",{staticClass:"oc-flex"},[i("oc-button",{staticClass:"oc-text-muted oc-text-small upload-info-toggle-details-btn",attrs:{appearance:"raw"},domProps:{textContent:e._s(e.infoExpanded?e.$gettext("Hide details"):e.$gettext("Show details"))},on:{click:e.toggleInfo}}),e._v(" "),!e.runningUploads&&Object.keys(e.errors).length?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Retry all failed uploads"),expression:"$gettext('Retry all failed uploads')"}],staticClass:"oc-ml-s",attrs:{appearance:"raw","aria-label":e.$gettext("Retry all failed uploads")},on:{click:e.retryUploads}},[i("oc-icon",{attrs:{name:"restart","fill-type":"line"}})],1):e._e(),e._v(" "),e.runningUploads&&e.uploadsPausable&&!e.inPreparation?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.uploadsPaused?e.$gettext("Resume upload"):e.$gettext("Pause upload"),expression:"uploadsPaused ? $gettext('Resume upload') : $gettext('Pause upload')"}],staticClass:"oc-ml-s",attrs:{id:"pause-upload-info-btn",appearance:"raw"},on:{click:e.togglePauseUploads}},[i("oc-icon",{attrs:{name:e.uploadsPaused?"play-circle":"pause-circle","fill-type":"line"}})],1):e._e(),e._v(" "),e.runningUploads&&!e.inPreparation?i("oc-button",{directives:[{name:"oc-tooltip",rawName:"v-oc-tooltip",value:e.$gettext("Cancel upload"),expression:"$gettext('Cancel upload')"}],staticClass:"oc-ml-s",attrs:{id:"cancel-upload-info-btn",appearance:"raw"},on:{click:e.cancelAllUploads}},[i("oc-icon",{attrs:{name:"close-circle","fill-type":"line"}})],1):e._e()],1)]),e._v(" "),e.runningUploads?i("div",{staticClass:"upload-info-progress oc-mx-m oc-pb-m oc-mt-s"},[i("oc-progress",{attrs:{value:e.totalProgress,max:100,size:"small",indeterminate:!e.filesInProgressCount}})],1):e._e(),e._v(" "),e.infoExpanded?i("div",{staticClass:"upload-info-items oc-px-m oc-pb-m"},[i("ul",{staticClass:"oc-list"},e._l(e.uploads,(function(t,a){return i("li",{key:a,class:{"oc-mb-s":a!==Object.keys(e.uploads).length-1}},[i("span",{staticClass:"oc-flex oc-flex-middle"},["error"===t.status?i("oc-icon",{attrs:{name:"close",variation:"danger",size:"small"}}):"success"===t.status?i("oc-icon",{attrs:{name:"check",variation:"success",size:"small"}}):"cancelled"===t.status?i("oc-icon",{attrs:{name:"close",size:"small"}}):e.uploadsPaused?i("oc-icon",{attrs:{name:"pause",size:"small"}}):i("div",{staticClass:"oc-flex"},[i("oc-spinner",{attrs:{size:"small"}})],1),e._v(" "),e.displayFileAsResource(t)?i("oc-resource",{key:t.path,staticClass:"oc-ml-s",attrs:{resource:t,"is-path-displayed":!0,"is-thumbnail-displayed":e.displayThumbnails,"is-resource-clickable":e.isResourceClickable(t),"parent-folder-name-default":e.defaultParentFolderName(t),"folder-link":e.folderLink(t),"parent-folder-link":e.parentFolderLink(t)}}):i("span",{staticClass:"oc-flex oc-flex-middle oc-text-truncate"},[i("oc-resource-icon",{staticClass:"file_info__icon oc-mx-s",attrs:{resource:t,size:"large"}}),e._v(" "),i("oc-resource-name",{attrs:{name:t.name,extension:t.extension,type:t.type,"full-path":"","is-path-displayed":!1}})],1)],1),e._v(" "),e.getUploadItemMessage(t)?i("span",{staticClass:"upload-info-message oc-ml-xs oc-text-small",class:e.getUploadItemClass(t),domProps:{textContent:e._s(e.getUploadItemMessage(t))}}):e._e()])})),0)]):e._e()]):e._e()};V._withStripped=!0;const B=t.normalizeComponent({render:V,staticRenderFns:[]},undefined,q,undefined,false,undefined,!1,void 0,void 0,void 0);const j=t.defineComponent$1({components:{MessageBar:F,TopBar:L,SidebarNav:z,UploadInfo:B},setup(){const e=i.useStore();return t.watch(s.useRoute(),(e=>{e.matched.length&&e.matched.forEach((t=>{const i=Object.keys(t.components).filter((e=>"default"!==e));i.length&&console.warn(`named components are deprecated, use "default" instead of "${i.join(", ")}" on route ${e.name}`)}))}),{immediate:!0}),{activeApp:o.useActiveApp(),isUserContext:o.useUserContext({store:e})}},data:()=>({windowWidth:0}),computed:{...t.mapGetters(["apps","activeMessages","activeNotifications","capabilities","configuration","getExtensionsWithNavItems","getNavItemsByExtension"]),isIE11:()=>!!window.MSInputMethodContext&&!!document.documentMode,ieDeprecationWarning(){return this.$gettext("Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.")},isSidebarVisible(){return this.sidebarNavItems.length&&this.windowWidth>=640},sidebarNavItems(){if(!this.isUserContext)return[];const e=this.getNavItemsByExtension(this.activeApp);if(!e)return[];const{href:t}=this.$router.resolve(this.$route);return e.map((e=>{const i=[e.route,...e.activeFor||[]].filter(Boolean).reduce(((e,i)=>{if(e)return!0;try{const e=this.$router.resolve(i).href;return t.startsWith(e)}catch(e){return console.error(e),!1}}),!1),a="function"==typeof e.name?e.name(this.capabilities):e.name;return{...e,name:this.$gettext(a),active:i}}))},applicationsList(){const e=[];return this.getExtensionsWithNavItems.forEach((t=>{e.push({...this.apps[t],type:"extension"})})),this.configuration.applications.forEach((t=>{e.push({...t,type:"link"})})),e}},mounted(){this.$nextTick((()=>{window.addEventListener("resize",this.onResize),this.onResize()}))},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{...t.mapActions(["deleteMessage"]),onResize(){this.windowWidth=window.innerWidth}}});var H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"web-content"}},[i("div",{attrs:{id:"web-content-header"}},[e.isIE11?i("div",{staticClass:"oc-background-muted oc-text-center oc-py-m"},[i("p",{staticClass:"oc-m-rm",domProps:{textContent:e._s(e.ieDeprecationWarning)}})]):e._e(),e._v(" "),i("top-bar",{attrs:{"applications-list":e.applicationsList,"active-notifications":e.activeNotifications}})],1),e._v(" "),i("div",{staticClass:"oc-px-s oc-pb-s",attrs:{id:"web-content-main"}},[i("div",{staticClass:"app-container oc-flex"},[e.isSidebarVisible?i("sidebar-nav",{staticClass:"app-navigation",attrs:{"nav-items":e.sidebarNavItems}}):e._e(),e._v(" "),e._l(["default","app","fullscreen"],(function(e){return i("router-view",{key:"router-view-"+e,staticClass:"app-content oc-width-1-1",attrs:{name:e}})}))],2)]),e._v(" "),i("div",{staticClass:"snackbars"},[i("message-bar",{attrs:{"active-messages":e.activeMessages},on:{deleteMessage:e.deleteMessage}}),e._v(" "),i("upload-info")],1)])};H._withStripped=!0;const G=t.normalizeComponent({render:H,staticRenderFns:[]},undefined,j,undefined,false,undefined,!1,void 0,void 0,void 0);const W={computed:{...t.mapGetters(["configuration"])}};var Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"loading-overlay oc-flex oc-flex-middle oc-flex-center",style:{backgroundImage:"url("+e.configuration.currentTheme.loginPage.backgroundImg+")"}},[i("oc-spinner",{attrs:{size:"xlarge","aria-label":e.$gettext("Loading")}})],1)};Q._withStripped=!0;const Y=t.normalizeComponent({render:Q,staticRenderFns:[]},undefined,W,undefined,false,undefined,!1,void 0,void 0,void 0);var K=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)};K._withStripped=!0;const X=t.normalizeComponent({render:K,staticRenderFns:[]},undefined,{},undefined,false,undefined,!1,void 0,void 0,void 0),J=({store:e})=>{const t=e.getters.capabilities?.core?.status;if(!t||!t.versionstring)return;return`${t.product||"ownCloud"} ${t.productversion||t.versionstring} ${t.edition}`};const Z=t.defineComponent$1({components:{SkipTo:u},data:()=>({$_notificationsInterval:null,windowWidth:0,announcement:"",activeBlobStyle:{}}),computed:{...t.mapState(["route","user","modal","sidebar"]),...t.mapGetters(["configuration","capabilities","getSettingsValue"]),...t.mapGetters("runtime/auth",["isUserContextReady","isPublicLinkContextReady"]),layout(){return this.$route.name&&i.isAuthenticationRequired(this.$router,this.$route)?i.isPublicLinkContext(this.$router,this.$route)?this.isPublicLinkContextReady?G:Y:i.isUserContext(this.$router,this.$route)?this.isUserContextReady?G:Y:G:X},favicon(){return this.configuration.currentTheme.logo.favicon},selectedLanguage(){return this.getSettingsValue({extension:"ocis-accounts",bundle:"profile",setting:"language"})||this.user.language}},watch:{$route:{immediate:!0,handler:function(e){this.announceRouteChange(e),document.title=this.extractPageTitleFromRoute(e)}},capabilities:{immediate:!0,handler:function(e){e?.notifications&&(this.$nextTick((()=>{this.$_updateNotifications()})),this.$_notificationsInterval=setInterval((()=>{this.$_updateNotifications()}),3e4))}},selectedLanguage:{immediate:!0,handler(e){let t=this.$language.defaultLanguage;e&&(t="object"==typeof e&&e.listValue.values.length>0?e.listValue.values[0].stringValue:e),t?.indexOf("_")&&(t=t.split("_")[0]),t&&(this.$language.current=t,document.documentElement.lang=t)}}},destroyed(){this.$_notificationsInterval&&clearInterval(this.$_notificationsInterval)},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 5.7.0",J({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e},methods:{...t.mapActions(["fetchNotifications"]),focusModal(e,t){this.focus({revert:"beforeDestroy"===t})},$_updateNotifications(){this.fetchNotifications(this.$client).catch((e=>{console.error("Error while loading notifications: ",e),clearInterval(this.$_notificationsInterval)}))},announceRouteChange(e){const t=this.extractPageTitleFromRoute(e,!1),i=this.$gettext("Navigated to %{ pageTitle }");this.announcement=this.$gettextInterpolate(i,{pageTitle:t})},extractPageTitleFromRoute(e,t=!0){const i=[e.meta.title?this.$gettext(e.meta.title):e.name];if(t&&i.push(this.configuration.currentTheme.general.name),e.params.item)if(e.name.startsWith("files-")){const t=e.params.item.split("/").filter((e=>e.length));t.length&&i.unshift(t.pop())}else i.unshift(e.params.item);return i.join(" - ")}}});var ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"web"}},[i("oc-hidden-announcer",{attrs:{announcement:e.announcement,level:"polite"}}),e._v(" "),i("skip-to",{attrs:{target:"web-content-main"}},[i("translate",[e._v("Skip to main")])],1),e._v(" "),i(e.layout,{tag:"component"}),e._v(" "),i("portal-target",{attrs:{name:"app.runtime.modal",multiple:""}}),e._v(" "),e.modal.displayed?i("oc-modal",{attrs:{variation:e.modal.variation,icon:e.modal.icon,title:e.modal.title,message:e.modal.message,"has-input":e.modal.hasInput,"input-description":e.modal.inputDescription,"input-disabled":e.modal.inputDisabled,"input-error":e.modal.inputError,"input-label":e.modal.inputLabel,"input-selection-range":e.modal.inputSelectionRange,"input-type":e.modal.inputType,"input-value":e.modal.inputValue,"button-secondary-text":e.modal.buttonSecondaryText,"button-cancel-text":e.modal.cancelText,"button-confirm-text":e.modal.confirmText,"button-confirm-disabled":e.modal.confirmDisabled||!!e.modal.inputError,"checkbox-label":e.modal.checkboxLabel},on:{cancel:e.modal.onCancel,confirm:e.modal.onConfirm,input:e.modal.onInput,"checkbox-changed":e.modal.onCheckboxValueChanged,"confirm-secondary":e.modal.onConfirmSecondary,mounted:e.focusModal,beforeDestroy:e.focusModal}}):e._e()],1)};ee._withStripped=!0;const te=t.normalizeComponent({render:ee,staticRenderFns:[]},undefined,Z,undefined,false,undefined,!1,void 0,void 0,void 0);const ie={name:"MissingConfigPage",computed:{...t.mapGetters(["configuration"]),backgroundImg(){return this.configuration.currentTheme.loginPage.backgroundImg},logoImg(){return this.configuration.currentTheme.logo.login},favicon(){return this.configuration.currentTheme.logo.favicon}},metaInfo(){const e={};this.favicon&&(e.link=[{rel:"icon",href:this.favicon}]);const t={name:"generator",content:["ownCloud Web UI 5.7.0",J({store:this.$store})].filter(Boolean).join(", ")};return e.meta=[t],e}};var ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"oc-height-1-1",style:{backgroundImage:"url("+e.backgroundImg+")"},attrs:{id:"Web"}},[i("div",{staticClass:"oc-login oc-height-viewport"},[i("div",{staticClass:"oc-login-card oc-position-center"},[i("img",{staticClass:"oc-login-logo",attrs:{src:e.logoImg,alt:"","aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"oc-login-card-body"},[i("h1",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"oc-login-card-title"},[e._v("Missing or invalid config")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Please check if the file config.json exists and is correct.")]),e._v(" "),i("p",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("Also, make sure to check the browser console for more information.")])]),e._v(" "),i("div",{staticClass:"oc-login-card-footer"},[i("p",[i("translate",[e._v("For help visit our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://owncloud.dev/clients/web",target:"_blank"}},[e._v("documentation")]),e._v(" "),i("translate",[e._v("or join our")]),e._v(" "),i("a",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{href:"https://talk.owncloud.com/channel/web",target:"_blank"}},[e._v("chat")]),e._v(".\n        ")],1)])])])])};ae._withStripped=!0;const ne=t.normalizeComponent({render:ae,staticRenderFns:[]},undefined,ie,undefined,false,undefined,!1,void 0,void 0,void 0);var oe={state:{messages:[],notifications:{loading:!0,failed:!1,data:[]},quickActions:{}},actions:{showMessage({commit:e},t){e("ENQUEUE_MESSAGE",t)},deleteMessage(e,t){e.commit("REMOVE_MESSAGE",t)},fetchNotifications:(e,t)=>(e.commit("LOADING_NOTIFICATIONS",!0),t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications"}).then((t=>{"0"!==t.headers.get("Content-Length")&&t.json().then((i=>{t.ok?e.commit("UPDATE_NOTIFICATIONS",i.ocs.data):e.commit("ERROR_NOTIFICATIONS",i.ocs.meta.message),e.commit("LOADING_NOTIFICATIONS",!1)}))})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t),e.commit("LOADING_NOTIFICATIONS",!1)}))),deleteNotification(e,{client:t,notification:i}){t.requests.ocs({service:"apps/notifications",action:"api/v1/notifications/"+i,method:"DELETE"}).then((t=>{t.ok?e.commit("DELETE_NOTIFICATION",i):e.commit("ERROR_NOTIFICATIONS",t.ocs.meta.status)})).catch((t=>{e.commit("ERROR_NOTIFICATIONS",t)}))}},mutations:{ENQUEUE_MESSAGE(e,t){t.id||(t.id=Math.random().toString(36).slice(2,-1)),e.messages.push(t)},REMOVE_MESSAGE(e,t){e.messages.splice(e.messages.indexOf(t),1)},LOADING_NOTIFICATIONS(e,t){e.notifications.loading=t},ERROR_NOTIFICATIONS(e,t){e.notifications.failed=t},UPDATE_NOTIFICATIONS(e,t){e.notifications.data=t},DELETE_NOTIFICATION(e,t){const i=e.notifications.data.filter((e=>e.notification_id!==t));e.notifications.data=i},ADD_QUICK_ACTIONS(e,t){e.quickActions=Object.assign(e.quickActions,t)}},getters:{activeMessages:e=>e.messages,activeNotifications:e=>!(!e.notifications.data.length||e.notifications.failed)&&e.notifications.data}};const se={REGISTER_EXTENSION(e,t){const{app:i,extension:a}=t,n={app:i,icon:a.icon,img:a.img,newTab:a.newTab||!1,routeName:a.routeName,routes:a.routes||[],extension:a.extension,mimeType:a.mimeType,handler:a.handler,canBeDefault:!1!==a.canBeDefault,config:(e.fileEditorConfigs||{})[i],...a.label&&{label:a.label}};e.fileEditors.push(n),a.newFileMenu&&(a.newFileMenu.ext=a.extension,a.newFileMenu.action=n,a.newFileMenu.routes=a.routes,e.newFileHandlers.push(a.newFileMenu))},REGISTER_APP(e,t){if(t.extensions&&t.extensions.forEach((e=>{this.commit("REGISTER_EXTENSION",{app:t.id,extension:e})})),t.fileSideBars){const i=e.fileSideBars;t.fileSideBars.forEach((e=>{i.push(e)})),e.fileSideBars=i}if(t.filesListIndicators){const i=e.customFilesListIndicators;t.filesListIndicators.forEach((e=>{i.push(e)})),e.customFilesListIndicators=i}if(!t.id)return;const i={name:t.name||t.id,id:t.id,icon:t.icon||"check_box_outline_blank",...t.iconFillType&&{iconFillType:t.iconFillType},img:t.img||null,config:(e.fileEditorConfigs||{})[t.id]};e.meta[i.id]=i},FETCH_FILE(e,t){e.file.path=t},LOAD_EXTENSION_CONFIG(e,{id:t,config:i}){const a={...e.fileEditorConfigs};a[t]=i,e.fileEditorConfigs=a}},re={appIds:e=>Object.keys(e.meta),apps:e=>e.meta,activeFile:e=>e.file,newFileHandlers:e=>e.newFileHandlers,fileSideBars:e=>e.fileSideBars,customFilesListIndicators:e=>e.customFilesListIndicators,extensionConfigByAppId:e=>t=>e.fileEditorConfigs[t]||{}};var le={namespaced:!0,state:{accessToken:null,userContextReady:!1,publicLinkToken:null,publicLinkPassword:null,publicLinkContextReady:!1},getters:{accessToken:e=>e.accessToken,isUserContextReady:e=>e.userContextReady,publicLinkToken:e=>e.publicLinkToken,publicLinkPassword:e=>e.publicLinkPassword,isPublicLinkContextReady:e=>e.publicLinkContextReady},mutations:{SET_ACCESS_TOKEN(e,t){e.accessToken=t},SET_USER_CONTEXT_READY(e,t){e.userContextReady=t},SET_PUBLIC_LINK_CONTEXT(e,{publicLinkToken:t,publicLinkPassword:i,publicLinkContextReady:a}){e.publicLinkToken=t,e.publicLinkPassword=i,"boolean"==typeof a&&(e.publicLinkContextReady=a)}},actions:{clearUserContext({commit:e}){e("SET_ACCESS_TOKEN",null),e("SET_USER_CONTEXT_READY",!1)},clearPublicLinkContext({commit:e}){e("SET_PUBLIC_LINK_CONTEXT",{publicLinkToken:null,publicLinkPassword:null,publicLinkContextReady:!1})}}};const ce={LOAD_CONFIG(e,t){e.server=t.server.endsWith("/")?t.server:t.server+"/",e.auth=t.auth,e.openIdConnect=t.openIdConnect,e.state=void 0===t.state?"working":t.state,e.applications=void 0===t.applications?[]:t.applications,void 0!==t.options&&(e.options={...e.options,...t.options}),t.corrupted&&(e.corrupted=t.corrupted)},LOAD_THEME(e,t){e.currentTheme=t},LOAD_THEMES(e,t){e.themes=t}},ue={configuration:e=>e,previewFileMimeTypes:e=>{const t=e.options.previewFileMimeTypes;return(Array.isArray(t)?t:[]).filter(Boolean).map((e=>e.toLowerCase()))},homeFolder:(e,i)=>{if(t.isEmpty(e.options.homeFolder))return"/";const a=function(e,i){const a=/{{(.*?)}}/g,n=e.match(a);n&&n.forEach((a=>{const n=/{{substr\s([0-9]+)\s([0-9]+)\s\.(.*)}}/,o=a.match(n);if(!t.isEmpty(o)&&o.length>=4){const t=parseInt(o[1],10),n=parseInt(o[2],10),s=de(o[3],i);return void(e=e.replace(a,s.substring(t,t+n)))}const s=/{{\.(.*)}}/,r=a.match(s);!t.isEmpty(r)&&r.length>=2&&(e=e.replace(a,de(r[1],i)))}));return e}(e.options.homeFolder,i.user);return a.indexOf("//")>-1?"/":a},theme:e=>e.currentTheme};function de(e,t){return t[e.toLowerCase()]||""}var pe={state:{id:"",uuid:"",displayname:"",email:"",capabilities:[],version:{},groups:[],quota:null,language:null,role:null,roles:[]},actions:{resetUserState(e){""!==e.state.id&&this.reset({self:!1,nested:!1,modules:{user:{self:!0}}})}},mutations:{SET_USER(e,i){let a;a=0===Object.keys(i.email).length?"":i.email,e.displayname=i.displayname,e.id=i.id,e.uuid=i.uuid,e.username=i.username,e.email=a,e.groups=i.groups,e.language=i.language,e.role=i.role,t.setUser({username:i.id})},SET_CAPABILITIES(e,t){e.capabilities=t.capabilities,e.version=t.version},SET_QUOTA(e,t){t.free=parseInt(t.free),t.relative=parseFloat(t.relative),t.used=parseInt(t.used),t.total=parseInt(t.total),e.quota=t},SET_ROLES(e,t){e.roles=t}},getters:{getToken:(e,t,i,a)=>a["runtime/auth/accessToken"],capabilities:e=>e.capabilities,quota:e=>e.quota,user:e=>e}};const me={SET_SETTINGS_VALUES(e,i){e.settingsValues=null===i?null:t.keyBy(i,"value.id")},SET_SETTINGS_VALUE(e,i){e.settingsValues=t.assign({},e.settingsValues,{[i.value.id]:i})}},he={settingsValuesLoaded:e=>null!==e.settingsValues,hasSettingsValue:(e,t)=>({settingId:e,extension:i,bundle:a,setting:n})=>null!==t.getSettingsValue({settingId:e,extension:i,bundle:a,setting:n}),getSettingsValue:(e,i)=>({settingId:a,extension:n,bundle:o,setting:s})=>{if(!i.settingsValuesLoaded)return null;if(a){const i=t.findKey(e.settingsValues,(e=>e.value.settingId===a));return t.isNil(i)?null:e.settingsValues[i].value}const r=t.findKey(e.settingsValues,(e=>t.isEqual(e.identifier,{extension:n,bundle:o,setting:s})));return t.isNil(r)?null:e.settingsValues[r].value}};const ge=()=>{},fe={CREATE_MODAL(e,t){e.displayed=!0,e.variation=t.variation||"passive",e.icon=t.icon,e.title=t.title,e.message=t.message,e.buttonSecondaryText=t.buttonSecondaryText,e.checkboxLabel=t.checkboxLabel||"",e.cancelText=t.cancelText||"Cancel",e.confirmText=t.confirmText||"Confirm",e.confirmDisabled=t.confirmDisabled||!1,e.onCancel=t.onCancel,e.onConfirm=t.onConfirm,e.hasInput=t.hasInput||!1,e.inputValue=t.inputValue||null,e.inputSelectionRange=t.inputSelectionRange,e.inputDescription=t.inputDescription||null,e.inputLabel=t.inputLabel||null,e.inputError=t.inputError||null,e.inputDisabled=t.inputDisabled||!1,e.inputType=t.inputType||"text",e.onInput=t.onInput||ge,e.onCheckboxValueChanged=t.onCheckboxValueChanged||ge,e.onConfirmSecondary=t.onConfirmSecondary||ge},HIDE_MODAL(e){e.displayed=!1},SET_INPUT_ERROR_MESSAGE(e,t){e.inputError=t},TOGGLE_MODAL_CONFIRM_BUTTON(e){e.confirmDisabled=!e.confirmDisabled}};const ve={SET_NAV_ITEMS_FROM_CONFIG(e,{extension:t,navItems:i}){const a=e.staticNavItems;a[t]=i,e.staticNavItems=a},ADD_NAV_ITEM(e,{extension:t,navItem:i}){const a={...e.dynamicNavItems};a[t]=a[t]||[];const n=a[t].findIndex((e=>e.route.path===i.route.path));n>=0?a[t][n]=i:a[t].push(i),e.dynamicNavItems=a},SET_DYNAMIC_NAV_ITEMS(e,t){e.dynamicNavItems=t},SET_CLOSED(e,t){e.closed=t}},be={getNavItemsByExtension:(e,t)=>i=>[...e.staticNavItems[i]||[],...e.dynamicNavItems[i]||[]].filter((e=>{if(!e.enabled)return!0;try{return e.enabled(t.capabilities||{})}catch(t){return console.error("`enabled` callback on navItem "+e.name+" threw an error",t),!1}})),getExtensionsWithNavItems:(e,t)=>[...new Set([...Object.keys(e.staticNavItems),...Object.keys(e.dynamicNavItems)])].filter((e=>t.getNavItemsByExtension(e).length>0))};var we={modules:{app:oe,apps:{state:{file:{path:"",edit:!1},fileEditors:[],fileEditorConfigs:{},newFileHandlers:[],fileSideBars:[],customFilesListIndicators:[],meta:{}},actions:{openFile:(e,t)=>new Promise(((i,a)=>{const n=t.filePath;e.commit("FETCH_FILE",n);const o=t.client||!1;o?o.files.getFileContents(n).then(i).catch(a):i()})),registerApp({commit:e},t){e("REGISTER_APP",t)},addFileAction({commit:e},t){e("ADD_FILE_ACTION",t)}},mutations:se,getters:re},user:pe,config:{state:{state:null,server:"",auth:{clientId:"",apiUrl:"",authUrl:"",metaDataUrl:""},openIdConnect:{authority:""},themes:[],currentTheme:{general:{name:"",slogan:"",helpDeskText:"",helpDeskLink:"",helpDeskLinkText:"ownCloud Central"},logo:{topbar:"",favicon:"",login:"",notFound:""},loginPage:{autoRedirect:!0,backgroundImg:""},designTokens:{colorPalette:{}}},options:{contextHelpers:!0,defaultExtension:"files",topCenterNotifications:!1,disablePreviews:!1,displayResourcesLazy:!0,homeFolder:"",hoverableQuickActions:!1,sidebar:{shares:{showAllOnLoad:!1}},previewFileMimeTypes:[],runningOnEos:!1,cernFeatures:!1,sharingRecipientsPerPage:200}},actions:{loadConfig({commit:e},t){e("LOAD_CONFIG",t),t.external_apps&&t.external_apps.forEach((t=>{void 0!==t.config&&e("LOAD_EXTENSION_CONFIG",{id:t.id,config:t.config},{root:!0})}))},loadTheme(e,{theme:t}){e.commit("LOAD_THEME",t)},loadThemes(e,{theme:t}){e.commit("LOAD_THEMES",t)}},mutations:ce,getters:ue},settings:{state:{settingsValues:null},actions:{clearSettingsValues({commit:e}){e("SET_SETTINGS_VALUES",null)}},mutations:me,getters:he},modal:{state:{displayed:!1,variation:"passive",icon:"",title:"",message:"",cancelText:"",confirmText:"",buttonSecondaryText:"",confirmDisabled:!1,hasInput:!1,inputDisabled:!1,inputValue:"",inputSelectionRange:null,inputPlaceholder:"",inputLabel:"",inputError:"",checkboxLabel:"",inputType:"text",onCancel:ge,onConfirm:ge,onInput:ge,onCheckboxValueChanged:ge,onConfirmSecondary:ge},actions:{createModal({commit:e},t){e("CREATE_MODAL",t)},hideModal({commit:e}){e("HIDE_MODAL")},setModalInputErrorMessage({commit:e},t){e("SET_INPUT_ERROR_MESSAGE",t)},toggleModalConfirmButton({commit:e}){e("TOGGLE_MODAL_CONFIRM_BUTTON")}},mutations:fe},navigation:{state:{staticNavItems:{},dynamicNavItems:{},closed:!1},mutations:ve,getters:be,actions:{openNavigation({commit:e}){e("SET_CLOSED",!1)},closeNavigation({commit:e}){e("SET_CLOSED",!0)},clearDynamicNavItems({commit:e}){e("SET_DYNAMIC_NAV_ITEMS",{})}}},runtime:{namespaced:!0,modules:{auth:le,spaces:{namespaced:!0,state:{spaces:[]},getters:{spaces:e=>e.spaces},mutations:{LOAD_SPACES(e,t){e.spaces=t},UPDATE_SPACE_FIELD(e,i){const a=e.spaces,n=e.spaces.findIndex((e=>e.id===i.id));if(n<0)return;const o=a[n],s=t.has(o,i.field),r=t.set(o,i.field,i.value);s||t.Vue.set(a,n,r)},UPSERT_SPACE(e,t){const i=[...e.spaces],a=i.findIndex((e=>e.id===t.id));a>-1?i.splice(a,1,t):i.push(t),e.spaces=i},REMOVE_SPACE(e,t){e.spaces=e.spaces.filter((e=>e.id!==t.id))},CLEAR_SPACES(e){e.spaces=[]}},actions:{async loadSpaces(e,{graphClient:t}){const i=await t.drives.listMyDrives();if(!i.data)return;const a=i.data.value.map((e=>n.buildSpace(e)));e.commit("LOAD_SPACES",a)}}}}}},strict:!1};const ye={cs:{Account:"Účet","Account Information":"Informace o účtu","An error occurred while loading the public link":"Při načítání veřejného odkazu došlo k chybě","Application Switcher":"Přepínač Aplikací","Authentication failed":"Ověření selhalo",Cancel:"Zrušit",Confirm:"Potvrdit",Continue:"Pokračovat",documentation:"dokumentace","Download failed":"Stahování selhalo",Edit:"Upravit","File could not be located":"Soubor se nepodařilo najít","For help visit our":"Pro pomoc navštivte naše","Loading public link…":"Načítání veřejného odkazu...","Log out":"Odhlásit",Login:"Přihlásit","Login Error":"Chyba přihlášení",Logout:"Odhlásit se","No email has been set up":"Žádná emailová adresa nebyla nastavena",Notifications:"Oznámení","Please click the button below to authenticate and get access to your data.":"Stiskněte prosím tlačítko dole pro udělení oprávnění a zpřístupněte tak svá data.","Please contact the administrator if this error persists.":"Pokud tato chyba přetrvává, kontaktujte administrátora.","Please contact your administrator if you think this message shows up in error.":"Pokud si myslíte, že se tato zpráva zobrazuje omylem, kontaktujte svého administrátora.","Public link":"Veřejný odkaz","Upload complete":"Nahrávání dokončeno","Upload failed":"Nahrávání selhalo","Welcome to %{productName}":"Vítejte v %{productName}","You are not part of any group":"Nejste členem žádné skupiny"},de:{"{{ app.title }}":"{{ app.title }}","%{ errors } of %{ uploads } item failed":["%{ errors } von %{ uploads } Datei fehlgeschlagen","%{ errors } von %{ uploads } Dateien fehlgeschlagen"],"%{ filesInProgressCount } item uploading...":["%{ filesInProgressCount } Datei wird hochgeladen...","%{ filesInProgressCount } Dateien werden hochgeladen..."],"%{ roundedRemainingHours } hour left":["%{ roundedRemainingHours } Stunde verbleibend","%{ roundedRemainingHours } Stunden verbleibend"],"%{ roundedRemainingMinutes } minute left":["%{ roundedRemainingMinutes } Minute verbleibend","%{ roundedRemainingMinutes } Minuten verbleibend"],"%{ successfulUploads } item uploaded":["%{ successfulUploads } Datei hochgeladen","%{ successfulUploads } Dateien hochgeladen"],"%{used} of %{total} used":"%{used} von %{total} benutzt","%{used} used":"%{used} verwendet","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Achtung:</strong> Sie werden automatischen aus allen Anwendungen ausgeloggt.","Access denied":"Zugriff verweigert",Account:"Konto","Account Information":"Kontoinformationen","Account menu":"Benutzer-Menü","All files and folders":"Alle Dateien","Also, make sure to check the browser console for more information.":"Bitte prüfen Sie auch die Browser-Konsole für weitere Informationen.","An error occurred while loading the public link":"Beim Laden des öffentlichen Links ist ein Fehler aufgetreten","Application Switcher":"Apps-Menü","Authentication failed":"Authentifizierung fehlgeschlagen","Calculating estimated time...":"Berechnung der voraussichtlichen Dauer...",Cancel:"Abbrechen","Cancel upload":"Hochladen abbrechen","Change password":"Passwort ändern","Change Password":"Passwort ändern",chat:"chat","Click to switch theme":"Klicken, um das Farbschema zu wechseln",Close:"Schließen",Confirm:"Bestätigen",Continue:"Weiter","Current password":"Aktuelles Passwort","Currently used theme":"Aktuell verwendetes Farbschema","Dark mode":"Dunkler Modus","Display name":"Anzeigename",documentation:"Dokumentation","Download failed":"Fehler beim Herunterladen",Edit:"Bearbeiten",Email:"E-Mail","Enter password for public link":"Passworteingabe für öffentlichen Link","Failed to change password":"Fehler beim Ändern des Passworts","Few seconds left":"Noch wenige Sekunden","File could not be located":"Datei konnte nicht gefunden werden","For help visit our":"Für Hilfe besuche unsere","Group memberships":"Gruppenzugehörigkeiten","Hide details":"Details ausblenden",'If you like to login with a different user please proceed to\n          <router-link id="exitAnchor" :to="{ name: \'login\' }">exit</router-link>':'Zum Anmelden mit einem anderen Benutzer klicken Sie bitte <router-link id="exitAnchor" \\:to="{ name\\: \'login\' }">hier/router-link>',"Incorrect password":"Falsches Kennwort","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (der aktuell verwendeter Browser) wird offiziell nicht unterstützt. Bitte verwende aus Sicherheitsgründen einen anderen Browser.","Light mode":"Heller Modus",Loading:"Lade ...","Loading public link…":"Lade öffentlichen Link…","Log out":"Abmelden","Logging you in":"Sie werden eingeloggt",Login:"Login","Login Error":"Fehler beim Login",Logout:"Abmelden","Main navigation":"Hauptnavigation","Missing or invalid config":"Fehlende oder falsche Konfiguration","Navigate to %{ pageName } page":"Zur %{ pageName } Seite navigieren","Navigate to personal files page":"Zur persönlichen Ablage navigieren","Navigated to %{ pageTitle }":"Zur Seite %{ pageTitle } navigiert","New password":"Neues Passwort","No email has been set up":"Es wurde noch keine E-Mail eingerichtet",Notifications:"Benachrichtigungen","Oidc callback":"Oidc Callback","Oidc redirect":"Oidc Weiterleitung","or join our":"oder machen Sie mit bei ","ownCloud feedback survey":"ownCloud Feedbackumfrage","Password and password confirmation must be identical":"Passwort und Passwort-Bestätigung müssen identisch sein","Password was changed successfully":"Passwort wurde erfolgreich geändert","Pause upload":"Hochladen anhalten",Personal:"Persönlich","Personal storage":"Persönlicher Speicherplatz","Personal storage (%{percentage}% used)":"Persönlicher Speicher (%{percentage}% benutzt)","Please check if the file config.json exists and is correct.":"Bitte prüfen Sie ob die config.json Konfigurationsdatei existiert und valide ist.","Please click the button below to authenticate and get access to your data.":"Klicken Sie auf die Schaltfläche unten, um sich zu authentifizieren und auf Ihre Daten zuzugreifen.","Please contact the administrator if this error persists.":"Bitte kontaktieren Sie den Administrator, wenn dieser Fehler weiterhin besteht.","Please contact your administrator if you think this message shows up in error.":"Falls diese Meldung fehlerhaft erscheint, bitte die Systemverwaltung kontaktieren.","Please wait while you're being logged out.":"Bitte warten, Sie werden ausgeloggt.","Please wait, you are being redirected.":"Bitte warten, Sie werden weitergeleitet","Preparing upload...":"Hochladen wird vorbereitet...","Private link":"Privater Link","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Gib uns Feedback: Wir würden unser Webdesign gerne verbessern und freuen uns über deine Rückmeldung. Vielen Dank! Dein ownCloud Team.","Public link":"Öffentlicher Link","Quota exceeded":"Quota überschritten","Repeat new password":"Neues Passwort wiederholen","Resume upload":"Hochladen fortsetzen","Retry all failed uploads":"Alle fehlgeschlagenen Downloads erneut starten","Show details":"Details anzeigen","Sidebar navigation menu":"Navigation in der Seitenleiste","Skip to main":"Zum Hauptinhalt springen",this:"dies","This resource is password-protected":"Diese Datei ist passwortgeschützt","Toggle sidebar":"Seitenleiste ein-/ausklappen","Top bar":"Kopfleiste","Unknown error":"Unbekannter Fehler","Upload cancelled":"Hochladen abgebrochen","Upload complete":"Hochladen abgeschlossen","Upload failed":"Hochladen fehlgeschlagen","User ID":"Nutzer ID","User Menu":"Benutzermenü",Username:"Nutzername","Welcome to %{productName}":"Willkommen zu %{productName}","You are not part of any group":"Sie gehören keiner Gruppe an.","Your user session is invalid or has expired.":"Ihre Sitzung ist ungültig oder abgelaufen."},es:{"{{ app.title }}":"{{ app.title }}","%{used} of %{total} used":"usados %{used} de %{total} ","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Atención:</strong> esto cerrará la sesión de todas las aplicaciones que está ejecutando en\neste navegador con el usuario actual.","Access denied":"Acceso denegado",Account:"Cuenta","Account Information":"Información de cuenta","Account menu":"Menú de la cuenta","Also, make sure to check the browser console for more information.":"También, asegúrese de revisar la consola del navegador para más información. ","An error occurred while loading the public link":"Se ha producido un error al cargar el enlace público","Application Switcher":"Cambio de aplicación","Authentication failed":"Fallo de autenticación",Cancel:"Cancelar",chat:"chat","Click to switch theme":"Haga click aquí para cambiar tema",Close:"Cerrar",Continue:"Continuar","Currently used theme":"Tema en uso actualmente","Dark mode":"Modo nocturno","Display name":"Nombre a mostrar",documentation:"documentación","Download failed":"Descarga fallida",Edit:"Editar",Email:"Correo electrónico","File could not be located":"No se ha podido encontrar el archivo","For help visit our":"Para ayuda visite nuestra","Group memberships":"Membresía de grupo","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (su navegador actual) no esta soportado oficialmente. Por razones de seguridad, por favor cambie a otro navegador.",Loading:"Cargando","Loading public link…":"Cargando enlace público...","Log out":"Salir","Logging you in":"Accediendo",Login:"Iniciar sesión","Login Error":"Error de inicio de sesión",Logout:"Cerrar sesión","Main navigation":"Navegación principal","Missing or invalid config":"Configuración faltante o inválida","No email has been set up":"No se ha establecido ningún correo electrónico",Notifications:"Notificaciones","ownCloud feedback survey":"encuesta de ownCloud","Personal storage (%{percentage}% used)":"Almacenamiento personal (%{percentage}% usado)","Please check if the file config.json exists and is correct.":"Por favor revise que el archivo config.json existe y es correcto.","Please click the button below to authenticate and get access to your data.":"Pulse el botón para autenticarse y ganar acceso a sus datos.","Please contact the administrator if this error persists.":"Contacta con el administrador si el error persiste","Please contact your administrator if you think this message shows up in error.":"Póngase en contacto con su administrador si cree que este mensaje aparece por error.","Please wait, you are being redirected.":"Por favor espere. Lo estamos redireccionando.","Private link":"Enlace privado","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Denos su opinión. Queremos mejorar el diseño web y estaríamos felices de escuchar su opinión. ¡Gracias! Tu equipo de ownCloud.","Public link":"Enlace público","Sidebar navigation menu":"Menu lateral de navegación","Skip to main":"Volver al inicio",this:"esto","Toggle sidebar":"Cambiar barra lateral","Top bar":"Barra superior","Upload complete":"Subida completa","Upload failed":"Subida fallida","User ID":"ID del usuario","User Menu":"Menú del usuario",Username:"Usuario","Welcome to %{productName}":"Bienvenido a %{productName} ","You are not part of any group":"No eres parte de ningún grupo","Your user session is invalid or has expired.":"Su session es inválida o ha expirado."},fr:{"{{ app.title }}":"{{ app.title }}","%{ errors } of %{ uploads } item failed":["%{ errors } élément sur %{ uploads } échoué","%{ errors } éléments sur %{ uploads } échoués","%{ errors } éléments sur %{ uploads } échoués"],"%{ filesInProgressCount } item uploading...":["Envoi de %{ filesInProgressCount } élément…","Envoi de %{ filesInProgressCount } élément…","Envoi de %{ filesInProgressCount } éléments…"],"%{ roundedRemainingHours } hour left":["%{ roundedRemainingHours } heure restante","%{ roundedRemainingHours } heure restante","%{ roundedRemainingHours } heures restantes"],"%{ roundedRemainingMinutes } minute left":["%{ roundedRemainingMinutes } minute restante","%{ roundedRemainingMinutes } minutes restantes","%{ roundedRemainingMinutes } minutes restantes"],"%{ successfulUploads } item uploaded":["%{ successfulUploads } élément envoyé","%{ successfulUploads } éléments envoyés","%{ successfulUploads } éléments envoyés"],"%{used} of %{total} used":"%{used} sur %{total} utilisé","%{used} used":"%{used} utilisé","<strong>Attention:</strong> this will log you out from all applications you are running in\n          this browser with your current user.":"<strong>Attention :</strong>ceci va vous connecter sur toutes les applications qui sont actuelement ouvertes dans\n          votre nagivateur avec l'utilisateur actuel.","Access denied":"Accès refusé",Account:"Compte","Account Information":"Informations de compte","Account menu":"Menu du compte","All files and folders":"Tous les fichiers et dossiers","Also, make sure to check the browser console for more information.":"Aussi, vérifiez la console de votre navigateur pour plus d'informations.","An error occurred while loading the public link":"Une erreur est apparue lors du chargement du lien public","Application Switcher":" Changeur d'applications","Authentication failed":"Error d'authentification","Calculating estimated time...":"Calcul du temps nécessaire…",Cancel:"Annuler","Cancel upload":"Annuler l'envoi","Change password":"Modifier le mot de passe","Change Password":"Modifier le mot de passe",chat:"chat","Click to switch theme":"Cliquez pour changer de thème",Close:"Fermer",Confirm:"Confirmer",Continue:"Continuer","Current password":"Mot de passe actuel","Currently used theme":"Thème utilisé actuellement","Dark mode":"Mode sombre","Display name":"Afficher le nom",documentation:"documentation","Download failed":"Echec de téléchargement",Edit:"Editer",Email:"Email","Enter password for public link":"Entrer le mot de passe du lien public","Failed to change password":"Échec de la modification du mot de passe","Few seconds left":"Plus que quelques secondes","File could not be located":"Le fichier n'a pas été trouvé","For help visit our":"Pour de l'aide visiter notre ","Group memberships":"Membres du groupe","Hide details":"Masquer les détails","Incorrect password":"Mot de passe incorrect","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (votre navigateur actuel) n'est plus officiellement supporté. Pour des raisons de sécurité, utilisez un autre navigateur.","Light mode":"Mode clair",Loading:"Chargement","Loading public link…":"Chargement du lien public...","Log out":"Se déconnecter","Logging you in":"En cours d'identification",Login:"Se connecter","Login Error":"Erreur de connection","Main navigation":"Navigation principale","Missing or invalid config":"Configuration manqante ou incorrecte","Navigate to %{ pageName } page":"Aller vers la page %{ pageName }","Navigate to personal files page":"Aller vers la page des fichiers personnels","Navigated to %{ pageTitle }":"Aller vers %{ pageTitle }","New password":"Nouveau mot de passe","No email has been set up":"Pas d'adresse e-mail configurée",Notifications:"Notifications","Oidc callback":"Rappel Oidc","Oidc redirect":"Redirection Oidc","or join our":"ou rejoigner notre","ownCloud feedback survey":"Enquête d'opinion sur ownCloud","Password and password confirmation must be identical":"Le mot de passe et la confirmation doivent être identiques","Password was changed successfully":"Le mot de passe a bien été modifié","Pause upload":"Mettre en pause l'envoi",Personal:"Personnel","Personal storage":"Stockage personnel","Personal storage (%{percentage}% used)":"Stockage personnel (%{percentage}% utilisé)","Please check if the file config.json exists and is correct.":"S'il vous plait, vérifiez que le fichier config.json existe et qu'il est correcte","Please click the button below to authenticate and get access to your data.":"Veuillez cliquer le button ci-dessous pour vous authentifier et obtenir accès à vos données.","Please contact the administrator if this error persists.":"Veuillez contacter l'administrateur si cette erreur persiste.","Please contact your administrator if you think this message shows up in error.":"Veuillez contacter l'administrateur si vous pensez que ce message apparaît par erreur.","Please wait, you are being redirected.":"Veuillez patienter, vous allez être redirigé.","Preparing upload...":"Préparation de l'envoi…","Private link":"Lien privé","Provide your feedback: We'd like to improve the web design and would be happy to hear your feedback. Thank you! Your ownCloud team.":"Donner votre retour : nous aimerions améliorer le design du site web et nous serions heureux d'avoir votre retour. Merci ! Votre équipe ownCloud.","Public link":"Lien public","Repeat new password":"Saisissez à nouveau le nouveau mot de passe","Resume upload":"Reprendre l'envoi","Retry all failed uploads":"Réessayer tous les envois échoués","Show details":"Afficher les détails","Sidebar navigation menu":"manu de navigation du panneau latéral","Skip to main":"Passer le principal",this:"ceci","This resource is password-protected":"Cette ressource est protégée par mot de passe","Toggle sidebar":"Basculer l'affichage de la barre latérale","Top bar":"Barre supérieure","Upload cancelled":"Envoi annulé","Upload complete":"Upload terminé","Upload failed":"Upload a échoué","User ID":"ID utilisateur","User Menu":"Menu utilisateur",Username:"Nom d'utilisateur","Welcome to %{productName}":"Bienvenue sur %{productName}","You are not part of any group":"Vous n'êtes membre d'aucun groupe","Your user session is invalid or has expired.":"Votre session utilisateur est invalide ou a expirée."},gl:{Account:"Conta","Account Information":"Información da conta","An error occurred while loading the public link":"Produciuse un erro ao cargar a ligazón pública","Application Switcher":"Cambiador de aplicacións","Authentication failed":"Produciuse un fallo de autenticación",Cancel:"Cancelar",Confirm:"Confirmar",Continue:"Continuar",documentation:"documentación","Download failed":"Produciuse un fallo na descarga",Edit:"Editar","Enter password for public link":"Introduza o contrasinal para a ligazón pública","File could not be located":"Non foi posíbel localizar o ficheiro","For help visit our":"Para obter axuda visite o noso","Incorrect password":"Contrasinal incorrecta",Loading:"Cargando","Loading public link…":"Cargando a ligazón pública…","Log out":"Saír",Login:"Acceso","Login Error":"Produciuse un erro de acceso",Logout:"Saír","No email has been set up":"Non se configurou ningún correo-e",Notifications:"Notificacións","Please click the button below to authenticate and get access to your data.":"Prema no botón de embaixo para autenticarse e obter acceso aos seus datos.","Please contact the administrator if this error persists.":"Póñase en contacto co seu administrador se persiste o erro.","Please contact your administrator if you think this message shows up in error.":"Póñase en contacto co seu administrador se cre que esta mensaxe aparece por erro.","Public link":"Ligazón pública",this:"este","Upload complete":"Envío completado","Upload failed":"Produciuse un fallo no envío","Welcome to %{productName}":"Benvido a %{productName}","You are not part of any group":"Vostede non forma parte de ningún grupo"},it:{"Access denied":"Accesso negato",Account:"Utente","Account Information":"Informazioni utente","Account menu":"Menu utente","Authentication failed":"Autenticazione fallita",chat:"chat","Click to switch theme":"Clicca per cambiare tema","Currently used theme":"Tema in uso","Dark mode":"Modalità scura","Display name":"Mostra nome",documentation:"documentazione","Download failed":"Download fallito",Edit:"Modifica",Email:"Email","File could not be located":"File non trovato","For help visit our":"Per aiuto visita","Internet Explorer (your current browser) is not officially supported. For security reasons, please switch to another browser.":"Internet Explorer (il suo browser corrente) non è ufficialmente supportato. Per ragioni di sicurezza si prega di cambiare browser.","Light mode":"Modalità chiara",Loading:"Caricamento","Log out":"Esci",Login:"Login","Login Error":"Errore di login","Main navigation":"Navigazione principale","Missing or invalid config":"Configurazione mancante o invalida","Navigate to %{ pageName } page":"Vai a pagina %{ pageName }","No email has been set up":"Non è stata impostata nessuna email",Notifications:"Notifiche","or join our":"o unisciti a","ownCloud feedback survey":"Sondaggio ownCloud","Personal storage (%{percentage}% used)":"Spazio personale (utilizzato al %{percentage}%)","Please check if the file config.json exists and is correct.":"Controlla se il file config.json esiste ed è corretto","Please click the button below to authenticate and get access to your data.":"Clicca il pulsante sotto per autenticarti e accedere ai tuoi dati","Please contact the administrator if this error persists.":"Contatta l'amministratore se l'errore persiste","Please contact your administrator if you think this message shows up in error.":"Contatta l'amministratore se pensi che questo messaggio compaia per errore","Please wait, you are being redirected.":"Reindirizzamento in corso, attendere prego.","Private link":"Link privato","Public link":"Link pubblico","User ID":"ID utente","User Menu":"Menu utente",Username:"Nome utente","You are not part of any group":"Non sei parte di alcun gruppo","Your user session is invalid or has expired.":"La tua sessione è invalida o scaduta"}},Ce=t.ClientTranslations,ke=t.PkgTranslations,Ie=t.OdsTranslations;var xe={install(e){function i(e,t="url",i){return new Promise(((a,n)=>{i.append("X-Requested-With","XMLHttpRequest"),fetch(e,{headers:i}).then((e=>{e.ok?e.blob().then((e=>{if("base64"===t){const t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){a(t)}}else if("url"===t){const t=window.URL.createObjectURL(e);a(t)}})):n(e)})).catch((e=>{console.warn("media-source",e),n(e)}))}))}function a(e,t){e.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=");const a=t.value;e.setAttribute("data-image-source",a),i(a).then((t=>{a===e.getAttribute("data-image-source")?e.setAttribute("src",t):console.warn("image-source was updated again before image could load")})).catch((e=>{console.warn("image-source",e)}))}e.directive("image-source",{bind(e,t){console.warn("deprecation: image-source will be removed in 6.0.0"),a(e,t)},update(e,t){t.value!==t.oldValue&&a(e,t)}}),e.mixin({data:function(){return{mediaSourceQueue:new t._default({concurrency:2})}},methods:{mediaSource(e,t="url",a){return console.warn("deprecation: mediaSource will be removed in 6.0.0"),this.mediaSourceQueue.add((()=>i(e,t,a)))}}})}},_e={install(e){e.mixin({computed:{...t.mapGetters(["capabilities"]),isUrlSigningEnabled(){return this.capabilities.core&&this.capabilities.core["support-url-signing"]}},methods:{...t.mapActions(["showMessage"]),async downloadFile(e,t=null){const i=this.$store.getters["runtime/auth/isPublicLinkContextReady"],a=this.$store.getters["runtime/auth/isUserContextReady"];let n=null,o={};if(i)n=e.downloadURL;else{n=null===t?`${this.$client.helpers._davPath}${e.webDavPath}`:this.$client.fileVersions.getFileVersionUrl(e.id,t);o={Authorization:"Bearer "+this.$store.getters["runtime/auth/accessToken"]}}if(a&&this.isUrlSigningEnabled){try{if(200===(await fetch(n,{method:"HEAD",headers:o})).status){const t=await this.$client.signUrl(n);return void this.triggerDownload(t,e.name)}}catch(e){console.error(e)}this.showMessage({title:this.$gettext("Download failed"),desc:this.$gettext("File could not be located"),status:"danger",autoClose:{enabled:!0}})}else this.triggerDownload(n,e.name)},encodePath:a.encodePath,triggerDownload(e,t){const i=document.createElement("a");i.style.display="none",document.body.appendChild(i),i.href=e,i.setAttribute("download",t),i.click(),document.body.removeChild(i)}}})}};const Se={name:"Avatar",props:{type:{type:String,default:"div",validator:e=>e.match(/(div|span)/)},userName:{type:String,default:""},userid:{type:String,default:""},width:{type:Number,required:!1,default:42}},data:()=>({avatarSource:"",loading:!0}),computed:{...t.mapGetters(["capabilities","configuration"])},watch:{userid:function(e){this.setUser(e)}},mounted:function(){""!==this.userid?this.setUser(this.userid):this.loading=!1},methods:{setUser(e){if(this.loading=!0,this.avatarSource="",!this.capabilities.files_sharing.user.profile_picture||""===e)return void(this.loading=!1);const t=this.$store.getters["runtime/auth/accessToken"],i=new Headers,a=(this.configuration.server||window.location.origin)+"remote.php/dav/avatars/"+e+"/128.png";i.append("Authorization","Bearer "+t),i.append("X-Requested-With","XMLHttpRequest"),fetch(a,{headers:i}).then((e=>{if(e.ok)return e.blob();if(404!==e.status)throw new Error(`Unexpected status code ${e.status}`)})).then((e=>{this.loading=!1,this.avatarSource=e?window.URL.createObjectURL(e):""})).catch((t=>{this.avatarSource="",this.loading=!1,console.error(`Error loading avatar image for user "${e}": `,t.message)}))}}};var Ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.type,{tag:"component",attrs:{"aria-hidden":!0}},[e.loading?i("oc-spinner",{key:"avatar-loading",style:"width: "+e.width+"px; height: "+e.width+"px;"}):i("oc-avatar",{key:"avatar-loaded",attrs:{width:e.width,src:e.avatarSource,"user-name":e.userName}})],1)};Ee._withStripped=!0;const Ae=t.normalizeComponent({render:Ee,staticRenderFns:[]},undefined,Se,undefined,false,undefined,!1,void 0,void 0,void 0),Pe=[],Te="forward",Ne="backward";var Le={methods:{focus({from:e,to:t,revert:i}){const a=i?Ne:Te;e&&a===Te?Pe.splice(0,Pe.length):e=document.activeElement,a===Te&&Pe.push(e),a===Ne&&(t=Pe.pop()),t instanceof Element&&t.focus()}}},$e={mounted(){this.$nextTick((()=>this.$emit("mounted",this,"mounted")))},beforeDestroy(){this.$emit("beforeDestroy",this,"beforeDestroy")},updated(){this.$nextTick((()=>this.$emit("updated",this,"updated")))}};t.Vue.use(t.Plugin),t.Vue.use(t.index),t.Vue.use(t.VueRouter),t.Vue.use(t._default$1),t.Vue.use(t.vueScrollto),t.Vue.use(xe),t.Vue.use(_e),t.Vue.use(t.plugin),t.Vue.use(t.index$1,{refreshOnceOnNavigation:!0}),t.Vue.use(t._default$2),t.Vue.use(t.AsyncComputed),t.Vue.component("avatar-image",Ae),t.Vue.mixin(Le),t.Vue.mixin($e),window.Vue=t.Vue;const Re=t.lib$1.createStore(t.index.Store,{...we}),Fe={success:te,failure:ne},Ue=t.merge({},ye,Ce,ke,Ie),Oe={en:"English",de:"Deutsch",es:"Español",cs:"Czech",fr:"Français",it:"Italiano",gl:"Galego"};async function Me(e){const t=sessionStorage.getItem("dynamicClientData");if(null!==t){const e=t.client_secret_expires_at||0;if(0===e||Date.now()<1e3*e)return JSON.parse(t)}sessionStorage.removeItem("dynamicClientData");const a=await async function(e){return await fetch(e).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(`${e.authority}/.well-known/openid-configuration`),n=await async function(e,t){return await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).catch((e=>{console.error("Error: ",e)}))}(a.registration_endpoint,{redirect_uris:[i.buildUrl("/oidc-callback.html")],client_name:`ownCloud Web on ${window.location.origin}`});return sessionStorage.setItem("dynamicClientData",JSON.stringify(n)),n}const De=({applicationName:e,applicationId:i,store:a,router:n,translations:s,supportedLanguages:r})=>{if(!e)throw new o.ApiError("applicationName can't be blank");if(!i)throw new o.ApiError("applicationId can't be blank");return{announceRoutes:e=>((e,i,a)=>{if(!t.isArray(a))throw new o.ApiError("routes can't be blank");const n=t=>t.startsWith(`${e}-`)?t:`${e}-${t}`;a.map((i=>{if(!t.isObject(i))throw new o.ApiError("route can't be blank",i);const a=t.clone(i);return a.name&&(a.name=e===a.name?a.name:n(a.name)),a.path=`/${encodeURI(e)}${a.path}`,a.children&&(a.children=a.children.map((e=>{if(!t.isObject(i))throw new o.ApiError("route children can't be blank",i,e);const a=t.clone(e);return e.name&&(a.name=n(e.name)),a}))),a})).forEach((e=>{i.addRoute(e)}))})(i,n,e),announceNavigationItems:e=>((e,i,a)=>{if(!t.isObject(a))throw new o.ApiError("navigationItems can't be blank");i.commit("SET_NAV_ITEMS_FROM_CONFIG",{extension:e,navItems:a})})(i,a,e),announceTranslations:e=>((e,i,a)=>{if(!t.isObject(i))throw new o.ApiError("translations can't be blank");Object.keys(e).forEach((e=>{i[e]&&a[e]&&Object.assign(i[e],a[e])}))})(r,s,e),announceQuickActions:e=>((e,i)=>{if(!t.isObject(i))throw new o.ApiError("quickActions can't be blank");e.commit("ADD_QUICK_ACTIONS",i)})(a,e),announceStore:i=>((e,i,a)=>{const n=t.get(a,"default",a);if(!t.isObject(n))throw new o.ApiError("store can't be blank");i.registerModule(e,n)})(e,a,i),announceExtension:e=>((e,t,i)=>{t.commit("REGISTER_EXTENSION",{app:e,extension:i})})(i,a,e),requestStore:()=>(e=>(t.isEqual("production","development")&&console.warn("requestStore // store api is deprecated, use with caution"),e))(a),requestRouter:()=>(e=>(t.isEqual("production","development")&&console.warn("requestRouter // router api is deprecated, use with caution"),e))(n),openPortal:(e,a,n,o,s)=>((e,i,a,n,o,s)=>{t.Wormhole_1.open({to:["app",a,n].filter(Boolean).join("."),from:["app",e,n,o].filter(Boolean).join("."),order:o,passengers:s.map(i.$createElement)})})(i,e,a,n,o,s)}};class ze extends class{runtimeApi;constructor(e){this.runtimeApi=e}}{applicationScript;constructor(e,t){super(e),this.applicationScript=t}initialize(){const{routes:e,navItems:t,translations:i,quickActions:a,store:n}=this.applicationScript;return e&&this.runtimeApi.announceRoutes(e),t&&this.runtimeApi.announceNavigationItems(t),i&&this.runtimeApi.announceTranslations(i),a&&this.runtimeApi.announceQuickActions(a),n&&this.runtimeApi.announceStore(n),Promise.resolve(void 0)}ready(){const{ready:e}=this.applicationScript;return this.attachPublicApi(e),Promise.resolve(void 0)}mounted(e){const{mounted:t}=this.applicationScript;return this.attachPublicApi(t,e),Promise.resolve(void 0)}attachPublicApi(e,i){t.isFunction(e)&&e({...i&&{portal:{open:(...e)=>this.runtimeApi.openPortal.apply(i,[i,...e])}},instance:i,store:this.runtimeApi.requestStore(),router:this.runtimeApi.requestRouter(),announceExtension:this.runtimeApi.announceExtension})}}const qe=new Map,{requirejs:Ve,define:Be}=window;Be("@vue/composition-api",(()=>t.vueCompositionAPI)),Be("vuex",(()=>t.vuex)),Be("luxon",(()=>t.luxon));const je=async({applicationPath:e,store:i,router:a,translations:n,supportedLanguages:s})=>{if(qe.has(e))throw new o.RuntimeError("application already announced",e);const r=await new Promise(((t,i)=>Ve([e],(e=>t(e)),(e=>i(e))))).catch((t=>{throw console.error(t),new o.RuntimeError("cannot load application",e)}));let l;try{if(!t.isObject(r.appInfo))throw new o.RuntimeError("next applications not implemented yet, stay tuned");l=await(async({applicationScript:e,store:i,router:a,translations:n,supportedLanguages:s})=>{const{appInfo:r}=e;if(!t.isObject(r))throw new o.RuntimeError("appInfo can't be blank");const{id:l,name:c}=r;if(!l)throw new o.RuntimeError("appInfo.id can't be blank");if(!c)throw new o.RuntimeError("appInfo.name can't be blank");const u=De({applicationName:c,applicationId:l,store:i,router:a,translations:n,supportedLanguages:s});return await i.dispatch("registerApp",e.appInfo),new ze(u,e)})({applicationScript:r,store:i,router:a,translations:n,supportedLanguages:s}).catch()}catch(t){throw new o.RuntimeError("cannot create application",t.message,e)}return qe.set(e,l),l};class He extends t.DropTarget{addFiles=e=>{if(this.opts.uppyService)return void this.opts.uppyService.publish("filesSelected",e);const t=e.map((e=>({source:this.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}})));try{this.uppy.addFiles(t)}catch(e){this.uppy.log(e)}}}class Ge extends t.Tus{upload(e){return e.meta.tusEndpoint&&(this.opts.endpoint=e.meta.tusEndpoint),super.upload(e)}}class We{uppy;uploadInputs=[];constructor(){this.uppy=new t.Uppy({autoProceed:!0}),this.setUpEvents()}useTus({tusMaxChunkSize:e,tusHttpMethodOverride:t,tusExtension:i,onBeforeRequest:a}){const n={chunkSize:e||1/0,removeFingerprintOnSuccess:!0,overridePatchMethod:!!t,retryDelays:[0,500,1e3],uploadDataDuringCreation:i.includes("creation-with-upload"),onBeforeRequest:a},o=this.uppy.getPlugin("XHRUpload");o&&this.uppy.removePlugin(o);const s=this.uppy.getPlugin("Tus");s?s.setOptions(n):this.uppy.use(Ge,n)}useXhr({headers:e}){const i={endpoint:"",method:"put",headers:e,formData:!1,getResponseData:()=>({})},a=this.uppy.getPlugin("Tus");a&&this.uppy.removePlugin(a);const n=this.uppy.getPlugin("XHRUpload");n?n.setOptions(i):this.uppy.use(t.XHRUpload,i)}tusActive(){return!!this.uppy.getPlugin("Tus")}useDropTarget({targetSelector:e,uppyService:t}){this.uppy.getPlugin("DropTarget")||this.uppy.use(He,{target:e,uppyService:t,onDragOver:e=>{this.publish("drag-over",e)},onDragLeave:e=>{this.publish("drag-out",e)},onDrop:e=>{this.publish("drop",e)}})}removeDropTarget(){const e=this.uppy.getPlugin("DropTarget");e&&this.uppy.removePlugin(e)}subscribe(e,i){return t.bus.subscribe(e,i)}unsubscribe(e,i){t.bus.unsubscribe(e,i)}publish(e,i){t.bus.publish(e,i)}setUpEvents(){this.uppy.on("progress",(e=>{this.publish("progress",e)})),this.uppy.on("upload-progress",((e,t)=>{this.publish("upload-progress",{file:e,progress:t})})),this.uppy.on("cancel-all",(()=>{this.publish("uploadCancelled")})),this.uppy.on("complete",(e=>{this.publish("uploadCompleted",e),e.successful.forEach((e=>{this.uppy.removeFile(e.id)})),this.clearInputs()})),this.uppy.on("upload-success",(e=>{this.publish("uploadSuccess",e)})),this.uppy.on("upload-error",((e,t)=>{this.publish("uploadError",{file:e,error:t})})),this.uppy.on("file-removed",(()=>{this.publish("uploadRemoved"),this.clearInputs()})),this.uppy.on("file-added",(e=>{const t=e;if(this.uppy.getPlugin("XHRUpload")){const e=encodeURIComponent(t.name);this.uppy.setFileState(t.id,{xhrUpload:{endpoint:`${t.meta.tusEndpoint.replace(/\/+$/,"")}/${e}`}})}}))}registerUploadInput(e){"true"!==e.getAttribute("listener")&&(e.setAttribute("listener","true"),e.addEventListener("change",(e=>{const t=e.target,i=Array.from(t.files);this.publish("filesSelected",i)})),this.uploadInputs.push(e))}removeUploadInput(e){this.uploadInputs=this.uploadInputs.filter((t=>t!==e))}uploadFiles(e){this.uppy.addFiles(e)}retryAllUploads(){return this.uppy.retryAll()}pauseAllUploads(){return this.uppy.pauseAll()}resumeAllUploads(){return this.uppy.resumeAll()}cancelAllUploads(){return this.uppy.cancelAll()}clearInputs(){this.uploadInputs.forEach((e=>{e.value=null}))}}const Qe=e=>{const t=[{name:"preview",oldName:"media-viewer"},{name:"text-editor",oldName:"markdown-editor"}];return{...e,apps:e.apps.map((e=>{const i=t.find((t=>t.oldName===e));return i?(console.warn(`app "${i.oldName}" has been renamed, use "${i.name}" instead.`),i.name):e}))}},Ye=async({store:e,vue:i,designSystem:a,runtimeConfiguration:n})=>{const{theme:s}=await(async(e="")=>{const i={theme:t.defaultTheme};if("json"!==e.split(".").pop())return t.isEqual("production","development")&&console.info(`Theme '${e}' does not specify a json file, using default theme.`),i;try{const t=await fetch(e);return t.ok?{theme:await t.json()}:i}catch(t){return console.error(`Failed to load theme '${e}' is not a valid json file, using default theme.`),i}})(n?.theme);await e.dispatch("loadThemes",{theme:s});const r=o.useLocalStorage("oc_currentThemeName",null);null===t.unref(r)&&(r.value=E()),await e.dispatch("loadTheme",{theme:s[t.unref(r)]||s.default}),i.use(a,{tokens:e.getters.theme.designTokens})},Ke=({vue:e,supportedLanguages:i,translations:a})=>{e.use(t.getTextPlugin,{availableLanguages:i,defaultLanguage:navigator.language.substring(0,2),translations:a,silent:!0})},Xe=({store:e})=>{["ownCloud Web UI 5.7.0",J({store:e})].filter(Boolean).forEach((e=>{console.log(`%c ${e} `,"background-color: #041E42; color: #FFFFFF; font-weight: bold; border: 1px solid #FFFFFF; padding: 5px;")}))};e.bootstrap=async e=>{const n=await(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error(`config could not be loaded. HTTP status-code ${t.status}`);const i=await t.json().catch((e=>{throw new Error(`config could not be parsed. ${e}`)}));return a.configurationManager.initialize(i),i})(e);((e,i)=>{if(e.sentry?.dsn){const{dsn:a,environment:n="production",...o}=e.sentry;t.init({dsn:a,environment:n,integrations:[new t.Vue$1({Vue:i,attachProps:!0,logErrors:!0})],...o})}})(n,t.Vue),await(async({vue:e,runtimeConfiguration:i,store:a})=>{await a.dispatch("loadConfig",i),t.set(e,"$store",a)})({vue:t.Vue,store:Re,runtimeConfiguration:n}),await(async({runtimeConfiguration:e,store:t,router:i,translations:a,supportedLanguages:n})=>{const{apps:o=[],external_apps:s=[]}=Qe(e),r=[...o.map((e=>`web-app-${e}`)),...s.map((e=>e.path))].filter(Boolean),l=(await Promise.allSettled(r.map((e=>je({applicationPath:e,store:t,supportedLanguages:n,router:i,translations:a}))))).reduce(((e,t)=>("fulfilled"!==t.status?console.error(t.reason):e.push(t.value),e)),[]);return await Promise.all(l.map((e=>e.initialize()))),l})({runtimeConfiguration:n,store:Re,supportedLanguages:Oe,router:i.router,translations:Ue}),(({vue:e,runtimeConfiguration:a})=>{const n=new t.OwnCloud;n.init({baseUrl:a.server||window.location.origin}),e.prototype.$client=n,e.prototype.$clientService=i.clientService,e.prototype.$clientService.owncloudSdk=n})({vue:t.Vue,runtimeConfiguration:n}),(({vue:e})=>{e.prototype.$uppyService=new We})({vue:t.Vue}),(({vue:e,store:i})=>{const a=new r(i);e.prototype.$permissionManager=a,t.set(e,"$permissionManager",a)})({vue:t.Vue,store:Re}),await(async e=>{const{openIdConnect:t={}}=e;if(!t.dynamic)return;const{client_id:i,client_secret:a}=await Me(t);t.client_id=i,t.client_secret=a})(n),await(({vue:e,configurationManager:a,store:n,router:o})=>{i.authService.initialize(a,i.clientService,n,o),t.set(e,"$authService",i.authService)})({vue:t.Vue,configurationManager:a.configurationManager,store:Re,router:i.router}),Ke({vue:t.Vue,supportedLanguages:Oe,translations:Ue}),await Ye({store:Re,vue:t.Vue,designSystem:t.designSystem,runtimeConfiguration:n}),(({store:e,router:i})=>{const a=e.getters.appIds;let n=e.getters.configuration.options.defaultExtension;(!n||a.indexOf(n)<0)&&(n=a[0]);const o=e.getters.getNavItemsByExtension(n)[0]?.route;o&&i.addRoute({path:"/",redirect:()=>o}),t.sync(e,i)})({store:Re,router:i.router})},e.renderFailure=async e=>{Xe({store:Re}),await Ke({vue:t.Vue,supportedLanguages:Oe,translations:Ue}),await Ye({store:Re,vue:t.Vue,designSystem:t.designSystem}),console.error(e),new t.Vue({el:"#owncloud",store:Re,render:e=>e(Fe.failure)})},e.renderSuccess=()=>{const e=Array.from(qe.values()),a=new t.Vue({el:"#owncloud",store:Re,router:i.router,render:e=>e(Fe.success)});a.$once("mounted",(()=>{e.forEach((e=>e.mounted(a)))})),Re.watch(((e,t)=>t["runtime/auth/isUserContextReady"]||t["runtime/auth/isPublicLinkContextReady"]),(async(t,i)=>{t&&t!==i&&(Xe({store:Re}),await(async({applications:e})=>{await Promise.all(e.map((e=>e.ready())))})({applications:e}))}),{immediate:!0}),Re.watch(((e,t)=>t["runtime/auth/isUserContextReady"]),(()=>{if(Re.getters.capabilities?.spaces?.enabled){const e=a.$clientService.graphAuthenticated(Re.getters.configuration.server,Re.getters["runtime/auth/accessToken"]);Re.dispatch("runtime/spaces/loadSpaces",{graphClient:e})}}),{immediate:!0})},Object.defineProperty(e,"__esModule",{value:!0})}));
